<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta charset="UTF-8">
<meta name="generator" content="quarto-1.8.27">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>5&nbsp; 동물 보호소 입소: ggforce를 사용한 게이지 차트 만들기 – The Art of Data Visualization with ggplot2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./text.html" rel="next">
<link href="./bee-colonies.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-795e9e8eca1e12b12abcb09a27409631.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8fdef79e5307f93f1ac50f4e683e47eb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1SWN5BH1PZ"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1SWN5BH1PZ', { 'anonymize_ip': true});
</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
<meta property="og:title" content="5&nbsp; 동물 보호소 입소: ggforce를 사용한 게이지 차트 만들기 – The Art of Data Visualization with ggplot2">
<meta property="og:description" content="">
<meta property="og:image" content="https://nrennie.rbind.io/art-of-viz/animal-intakes_files/figure-html/fig-longbeach-barplot-1.png">
<meta property="og:site_name" content="The Art of Data Visualization with ggplot2">
<meta property="og:image:alt" content="동물 유형별 총 입소 동물 수 막대 차트. 고양이가 가장 많습니다.">
<meta property="og:image:height" content="1050">
<meta property="og:image:width" content="1500">
</head>
<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./common-charts.html">일반적인 차트도 지루할 필요는 없습니다!</a></li><li class="breadcrumb-item"><a href="./animal-intakes.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">동물 보호소 입소: <strong><code>ggforce</code></strong>를 사용한 게이지 차트 만들기</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The Art of Data Visualization with ggplot2</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">서문</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./author.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">저자</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">소개</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./common-charts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">일반적인 차트도 지루할 필요는 없습니다!</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programming-languages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">프로그래밍 언어: <strong><code>ggplot2</code></strong>를 이용한 덤벨 차트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./museums.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">영국 박물관: <strong><code>gghighlight</code></strong>로 선형 차트 강조하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bee-colonies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">꿀벌 군집 손실:푸아송 디스크 샘플링으로 수량 시각화</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./animal-intakes.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">동물 보호소 입소: <strong><code>ggforce</code></strong>를 사용한 게이지 차트 만들기</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./text.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">아이콘, 글꼴 및 텍스트 활용</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wind-turbines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">캐나다 풍력 터빈: 와플 차트와 픽토그램</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">고양이: <strong><code>ggtext</code></strong>를 사용한 데이터 기반 주석</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nobel-laureates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">노벨상 수상자: 텍스트 배치 및 플롯 매개변수화</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./images.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">이미지 작업</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lemurs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">여우원숭이: R에서 이미지 조작하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">R 패키지: 사용자 지정 패면 레이블에 이미지 사용하기</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./spatial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">공간 데이터 시각화</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./doctors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">전 세계 의사 분포: <strong><code>ggplot2</code></strong>로 지도 만들기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-zones.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">시간대: <strong><code>sf</code></strong>를 사용한 공간 데이터 및 매핑</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./us-elections.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">미국 하원 선거: <strong><code>geofacet</code></strong>을 이용한 그리드 위의 지리</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./other-tricks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">기타 팁과 요령</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bibliography</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">부록</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li><a href="#%EB%8D%B0%EC%9D%B4%ED%84%B0" id="toc-데이터" class="nav-link active" data-scroll-target="#%EB%8D%B0%EC%9D%B4%ED%84%B0"><span class="header-section-number">5.1</span> 데이터</a></li>
  <li>
<a href="#%ED%83%90%EC%83%89-%EC%9E%91%EC%97%85" id="toc-탐색-작업" class="nav-link" data-scroll-target="#%ED%83%90%EC%83%89-%EC%9E%91%EC%97%85"><span class="header-section-number">5.2</span> 탐색 작업</a>
  <ul class="collapse">
<li><a href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%90%EC%83%89" id="toc-데이터-탐색" class="nav-link" data-scroll-target="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%90%EC%83%89"><span class="header-section-number">5.2.1</span> 데이터 탐색</a></li>
  <li><a href="#%ED%83%90%EC%83%89%EC%A0%81-%EC%8A%A4%EC%BC%80%EC%B9%98" id="toc-탐색적-스케치" class="nav-link" data-scroll-target="#%ED%83%90%EC%83%89%EC%A0%81-%EC%8A%A4%EC%BC%80%EC%B9%98"><span class="header-section-number">5.2.2</span> 탐색적 스케치</a></li>
  </ul>
</li>
  <li>
<a href="#%ED%94%8C%EB%A1%AF-%EC%A4%80%EB%B9%84%ED%95%98%EA%B8%B0" id="toc-플롯-준비하기" class="nav-link" data-scroll-target="#%ED%94%8C%EB%A1%AF-%EC%A4%80%EB%B9%84%ED%95%98%EA%B8%B0"><span class="header-section-number">5.3</span> 플롯 준비하기</a>
  <ul class="collapse">
<li><a href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%9E%AD%EA%B8%80%EB%A7%81" id="toc-데이터-랭글링" class="nav-link" data-scroll-target="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%9E%AD%EA%B8%80%EB%A7%81"><span class="header-section-number">5.3.1</span> 데이터 랭글링</a></li>
  <li><a href="#ggforce-%ED%99%95%EC%9E%A5-%ED%8C%A8%ED%82%A4%EC%A7%80" id="toc-ggforce-확장-패키지" class="nav-link" data-scroll-target="#ggforce-%ED%99%95%EC%9E%A5-%ED%8C%A8%ED%82%A4%EC%A7%80"><span class="header-section-number">5.3.2</span> <strong><code>ggforce</code></strong> 확장 패키지</a></li>
  <li><a href="#ggforce%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EA%B2%8C%EC%9D%B4%EC%A7%80-%EC%B0%A8%ED%8A%B8" id="toc-ggforce를-사용한-게이지-차트" class="nav-link" data-scroll-target="#ggforce%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EA%B2%8C%EC%9D%B4%EC%A7%80-%EC%B0%A8%ED%8A%B8"><span class="header-section-number">5.3.3</span> <strong><code>ggforce</code></strong>를 사용한 게이지 차트</a></li>
  <li><a href="#%EB%AF%B8%ED%95%99-%EA%B3%84%EC%82%B0" id="toc-미학-계산" class="nav-link" data-scroll-target="#%EB%AF%B8%ED%95%99-%EA%B3%84%EC%82%B0"><span class="header-section-number">5.3.4</span> 미학 계산</a></li>
  <li><a href="#%EC%B2%AB-%EB%B2%88%EC%A7%B8-%ED%94%8C%EB%A1%AF" id="toc-첫-번째-플롯" class="nav-link" data-scroll-target="#%EC%B2%AB-%EB%B2%88%EC%A7%B8-%ED%94%8C%EB%A1%AF"><span class="header-section-number">5.3.5</span> 첫 번째 플롯</a></li>
  </ul>
</li>
  <li>
<a href="#%EA%B3%A0%EA%B8%89-%EC%8A%A4%ED%83%80%EC%9D%BC%EB%A7%81" id="toc-고급-스타일링" class="nav-link" data-scroll-target="#%EA%B3%A0%EA%B8%89-%EC%8A%A4%ED%83%80%EC%9D%BC%EB%A7%81"><span class="header-section-number">5.4</span> 고급 스타일링</a>
  <ul class="collapse">
<li><a href="#%EC%83%89%EC%83%81" id="toc-색상" class="nav-link" data-scroll-target="#%EC%83%89%EC%83%81"><span class="header-section-number">5.4.1</span> 색상</a></li>
  <li><a href="#%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%B0%8F-%EA%B8%80%EA%BC%B4" id="toc-텍스트-및-글꼴" class="nav-link" data-scroll-target="#%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%B0%8F-%EA%B8%80%EA%BC%B4"><span class="header-section-number">5.4.2</span> 텍스트 및 글꼴</a></li>
  <li><a href="#%ED%85%8C%EB%A7%88-%EC%A1%B0%EC%A0%95" id="toc-테마-조정" class="nav-link" data-scroll-target="#%ED%85%8C%EB%A7%88-%EC%A1%B0%EC%A0%95"><span class="header-section-number">5.4.3</span> 테마 조정</a></li>
  <li><a href="#%EC%A0%84%ED%86%B5%EC%A0%81%EC%9D%B8-%EB%B2%94%EB%A1%80%EC%9D%98-%EB%8C%80%EC%95%88" id="toc-전통적인-범례의-대안" class="nav-link" data-scroll-target="#%EC%A0%84%ED%86%B5%EC%A0%81%EC%9D%B8-%EB%B2%94%EB%A1%80%EC%9D%98-%EB%8C%80%EC%95%88"><span class="header-section-number">5.4.4</span> 전통적인 범례의 대안</a></li>
  </ul>
</li>
  <li><a href="#%EC%84%B1%EC%B0%B0" id="toc-성찰" class="nav-link" data-scroll-target="#%EC%84%B1%EC%B0%B0"><span class="header-section-number">5.5</span> 성찰</a></li>
  <li><a href="#%EC%97%B0%EC%8A%B5-%EB%AC%B8%EC%A0%9C" id="toc-연습-문제" class="nav-link" data-scroll-target="#%EC%97%B0%EC%8A%B5-%EB%AC%B8%EC%A0%9C"><span class="header-section-number">5.6</span> 연습 문제</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./common-charts.html">일반적인 차트도 지루할 필요는 없습니다!</a></li><li class="breadcrumb-item"><a href="./animal-intakes.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">동물 보호소 입소: <strong><code>ggforce</code></strong>를 사용한 게이지 차트 만들기</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-longbeach" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">동물 보호소 입소: <strong><code>ggforce</code></strong>를 사용한 게이지 차트 만들기</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>이 장에서는 <strong><code>ggforce</code></strong> 확장 패키지의 도움으로 <strong><code>ggplot2</code></strong>에 기본적으로 포함되지 않은 차트 유형인 게이지 차트를 만드는 방법을 알아봅니다.</p>
<p>이 장을 마치면 다음을 할 수 있게 됩니다:</p>
<ul>
<li>
<strong><code>ggforce</code></strong> 패키지의 새로운 <em>geom</em> 함수를 사용하기 위해 플롯 요소의 크기를 프로그래밍 방식으로 계산하여 게이지 차트를 만듭니다.</li>
<li>다른 종횡비나 좌표계를 선택하면 차트의 모양이 어떻게 바뀔 수 있는지 확인합니다.</li>
<li>색상 선택이 색각 이상이 있는 사람들에게 접근 가능한지 분석합니다.</li>
</ul>
<p>이 장에 필요한 패키지를 로드하는 것으로 시작합니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/clauswilke/colorblindr">colorblindr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggforce.data-imaginist.com">ggforce</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggtext/">ggtext</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org">scales</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yixuan/showtext">showtext</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yixuan/sysfonts">sysfonts</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dslc-io.github.io/tidytuesdayR/">tidytuesdayR</a></span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이 장에서는 이전 장에서 아직 사용하지 않은 몇 가지 새로운 패키지를 소개합니다:</p>
<ul>
<li>
<strong><code>colorblindr</code></strong>: 색상 팔레트의 접근성과 차트의 색상 사용을 평가합니다.</li>
<li>
<strong><code>ggforce</code></strong>: <strong><code>ggplot2</code></strong>의 동작을 확장하고 추가 <em>geoms</em> 및 <em>stats</em>를 제공하는 패키지입니다.</li>
<li>
<strong><code>lubridate</code></strong>: 날짜 변수를 조작하고 생성하기 위한 패키지입니다. <a href="nobel-laureates.html" class="quarto-xref"><span>Chapter 8</span></a> 및 <a href="r-packages.html" class="quarto-xref"><span>Chapter 10</span></a> 에서 <strong><code>lubridate</code></strong>의 더 많은 예를 볼 수 있습니다.</li>
<li>
<strong><code>scales</code></strong>: <strong><code>ggplot2</code></strong>는 배경에서 <strong><code>scales</code></strong> 패키지를 사용하여 축 제한 및 레이블에 도움을 줍니다. 그러나 <strong><code>scales</code></strong>의 함수를 직접 사용하여 데이터, 레이블 및 색상을 변환할 수 있습니다.</li>
</ul>
<p> </p>
<section id="데이터" class="level2" data-number="5.1"><h2 data-number="5.1" class="anchored" data-anchor-id="데이터">
<span class="header-section-number">5.1</span> 데이터</h2>
<p>Long Beach 동물 보호소 데이터 세트 <span class="citation" data-cites="longbeach_data">(<a href="references.html#ref-longbeach_data" role="doc-biblioref">Long Beach Animal Shelter 2025</a>)</span>에는 2017년에서 2014년 사이에 보호소에 맡겨진 28,000마리 이상의 동물에 대한 입소 및 결과 정보가 포함되어 있습니다. 여기서 <em>맡겨진(surrendered)</em>이라는 용어는 보호소로 들어온 모든 동물을 의미하지만, 데이터 세트에는 소유자가 맡겼는지, 압수되었는지, 길 잃은 동물로 발견되었는지, 아니면 다른 수단을 통해 도착했는지에 대한 정보도 포함되어 있습니다.</p>
<p>동물 보호소 데이터 세트는 2025년 3월 TidyTuesday 데이터 세트로 사용되었으며 (<a href="https://github.com/lgibson7">Lydia Gibson</a>이 큐레이팅한 후), 데이터는 <strong><code>animalshelter</code></strong> 패키지 <span class="citation" data-cites="animalshelter">(<a href="references.html#ref-animalshelter" role="doc-biblioref">Hvitfeldt 2025</a>)</span>를 통해서도 사용할 수 있습니다. <strong><code>tidytuesdayR</code></strong> R 패키지 <span class="citation" data-cites="tidytuesdayR">(<a href="references.html#ref-tidytuesdayR" role="doc-biblioref">Hughes 2022b</a>)</span>를 사용하여 데이터를 읽고 변수 정의를 살펴보는 것으로 시작하겠습니다: </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tuesdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dslc-io.github.io/tidytuesdayR/reference/tt_load.html">tt_load</a></span><span class="op">(</span><span class="st">"2025-03-04"</span><span class="op">)</span></span>
<span><span class="va">longbeach</span> <span class="op">&lt;-</span> <span class="va">tuesdata</span><span class="op">$</span><span class="va">longbeach</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><code>longbeach</code> 데이터는 29787행과 22열로 상당히 큽니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">longbeach</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 6 × 22
  animal_id animal_name animal_type primary_color
  &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;        
1 A693708   *charlien   dog         white        
2 A708149   &lt;NA&gt;        reptile     brown        
3 A638068   &lt;NA&gt;        bird        green        
4 A639310   &lt;NA&gt;        bird        white        
5 A618968   *morgan     cat         black        
6 A730385   *brandon    rabbit      black        
# ℹ 18 more variables: secondary_color &lt;chr&gt;, sex &lt;chr&gt;,
#   dob &lt;date&gt;, intake_date &lt;date&gt;, intake_condition &lt;chr&gt;,
#   intake_type &lt;chr&gt;, intake_subtype &lt;chr&gt;,
#   reason_for_intake &lt;chr&gt;, outcome_date &lt;date&gt;,
#   crossing &lt;chr&gt;, jurisdiction &lt;chr&gt;, outcome_type &lt;chr&gt;,
#   outcome_subtype &lt;chr&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
#   outcome_is_dead &lt;lgl&gt;, was_outcome_alive &lt;lgl&gt;, …</code></pre>
</div>
</div>
<p>데이터 세트의 각 행은 서로 다른 입소와 관련이 있으며, <code>animal_id</code> 열에서 식별할 수 있듯이 일부 동물은 여러 번 나타납니다. 이름, 동물의 종류(예: 고양이 또는 개), 색상, 성별 및 생년월일과 같은 각 개별 동물에 대한 추가 정보가 제공됩니다. 이러한 열 중 상당수는 주로 길 잃은 동물로 도착한 동물에 대한 정보 부족으로 인해 누락된 값이 과도하게 많습니다. 추가 열은 날짜, 유형 및 하위 유형(예: 소유자 포기 또는 길 잃음)을 포함한 입소에 대한 정보와 입소에 대한 이유를 제공하는 자유 텍스트 응답을 제공합니다. 좌표 날짜 및 관할 구역을 포함하여 포획 또는 입소의 지리적 위치에 대한 더 자세한 정보가 제공됩니다. 마지막으로, 결과가 발생한 시기, 유형 및 하위 유형(예: 입양 또는 사망)을 포함하여 각 동물의 결과에 대한 데이터도 제공됩니다. 다양한 결과에 대한 일부 이진 변수도 미리 계산됩니다.</p>
</section><section id="탐색-작업" class="level2" data-number="5.2"><h2 data-number="5.2" class="anchored" data-anchor-id="탐색-작업">
<span class="header-section-number">5.2</span> 탐색 작업</h2>
<p>동물과 입소 및 결과에 대해 기록된 다양한 측면을 고려할 때 더 조사할 수 있는 변수가 많이 있습니다. 이 데이터의 어떤 측면을 시각화하는 것이 흥미로울까요?</p>
<section id="데이터-탐색" class="level3" data-number="5.2.1"><h3 data-number="5.2.1" class="anchored" data-anchor-id="데이터-탐색">
<span class="header-section-number">5.2.1</span> 데이터 탐색</h3>
<p>이 책의 다른 장과 마찬가지로 기본 R의 몇 가지 기본 탐색 플롯으로 시작하겠습니다. 예를 들어 <a href="#fig-longbeach-barplot" class="quarto-xref">Figure&nbsp;<span>5.1</span></a> 의 <code><a href="https://rdrr.io/r/graphics/barplot.html">barplot()</a></code> 함수를 사용하여 각 <code>animal_type</code>의 변수 분포를 볼 수 있습니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">longbeach</span><span class="op">$</span><span class="va">animal_type</span><span class="op">)</span>,</span>
<span>  las <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  horiz <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-barplot" class="quarto-float quarto-figure quarto-figure-center anchored" alt="동물 유형별 총 입소 동물 수 막대 차트. 고양이가 가장 많습니다.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-barplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-barplot-1.png" class="img-fluid figure-img" alt="동물 유형별 총 입소 동물 수 막대 차트. 고양이가 가장 많습니다.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-barplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.1: 동물 유형별 총 입소 동물 수 막대 차트.
</figcaption></figure>
</div>
</div>
</div>
<p>고양이와 관련된 관찰이 많으며 개가 꽤 근접하게 2위를 차지했습니다. 이것은 이런 종류의 동물을 반려동물로 키우는 것이 얼마나 흔한지를 나타낼 가능성이 큽니다. 또한 <a href="#fig-longbeach-scatterplot" class="quarto-xref">Figure&nbsp;<span>5.2</span></a> 에 표시된 대로 입소 횟수가 시간이 지남에 따라 어떻게 변했는지에 관심이 있을 수 있습니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">longbeach</span><span class="op">$</span><span class="va">intake_date</span><span class="op">)</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">""</span>, ylab <span class="op">=</span> <span class="st">""</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Number of animals surrendered per day"</span></span>
<span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-scatterplot" class="quarto-float quarto-figure quarto-figure-center anchored" alt="일일 입소 동물 수를 보여주는 선형 차트로, 계절적 피크와 2020-2021년 동안 낮은 수치를 보여줍니다.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-scatterplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-scatterplot-1.png" class="img-fluid figure-img" alt="일일 입소 동물 수를 보여주는 선형 차트로, 계절적 피크와 2020-2021년 동안 낮은 수치를 보여줍니다.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-scatterplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.2: 일일 입소 동물 수를 보여주는 선형 차트로, 계절적 피크와 2020-2021년 동안 낮은 수치를 보여줍니다.
</figcaption></figure>
</div>
</div>
</div>
<p>입소 횟수에 약간의 계절적 차이가 있으며 2020년과 2021년 동안 약간 감소한 것으로 보입니다. 이는 아마도 COVID-19 팬데믹이 포획할 수 있는 동물 수에 영향을 미쳤기 때문일 것입니다.</p>
<p><a href="#fig-longbeach-heatmap" class="quarto-xref">Figure&nbsp;<span>5.3</span></a> 의 기본 R에서 <code><a href="https://rdrr.io/r/stats/heatmap.html">heatmap()</a></code> 함수를 사용하여 다양한 동물 유형에 대한 입소 횟수가 시간이 지남에 따라 어떻게 변했는지 살펴보는 것이 더 흥미로울 수 있습니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/heatmap.html">heatmap</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span></span>
<span>    <span class="va">longbeach</span><span class="op">$</span><span class="va">animal_type</span>,</span>
<span>    <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">longbeach</span><span class="op">$</span><span class="va">intake_date</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># prevent re-ordering</span></span>
<span>  Rowv <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  Colv <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  <span class="co"># make labels smaller so they fit on the page</span></span>
<span>  margins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  cexRow <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  cexCol <span class="op">=</span> <span class="fl">0.5</span></span>
<span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-heatmap" class="quarto-float quarto-figure quarto-figure-center anchored" alt="매년 각 유형의 입소 동물 수 히트맵. 2020년과 2021년에는 모든 유형의 동물이 더 적게 입소했습니다.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-heatmap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-heatmap-1.png" class="img-fluid figure-img" alt="매년 각 유형의 입소 동물 수 히트맵. 2020년과 2021년에는 모든 유형의 동물이 더 적게 입소했습니다.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-heatmap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.3: 매년 각 유형의 입소 동물 수 히트맵. 2020년과 2021년에는 모든 유형의 동물이 더 적게 입소했습니다.
</figcaption></figure>
</div>
</div>
</div>
<p><a href="#fig-longbeach-heatmap" class="quarto-xref">Figure&nbsp;<span>5.3</span></a> 에서는 일부 동물 유형의 수가 매우 적으므로 데이터를 연간 값으로 집계하기 위해 <strong><code>lubridate</code></strong>의 <code><a href="https://lubridate.tidyverse.org/reference/year.html">year()</a></code> 함수를 사용하여 날짜 변수에서 연도를 추출했습니다.</p>
<p>이 데이터를 더 의미 있고 미적인 방식으로 시각적으로 표현하는 방법에 대해 생각해 봅시다. 모든 연도의 데이터를 포함하면 값의 추세를 고려할 수 있지만 때로는 몇 가지 스냅샷만 보는 것이 더 효과적일 수 있습니다. 예를 들어, 여기서 할 것처럼 2017년과 2023년만 고려함으로써 독자는 점진적인 추세에 대한 시각적 효과가 덜할 수 있는 시각적 효과보다는 <em>와, 상황이 얼마나 변했는지 봐!</em>라는 메시지를 받을 수 있습니다. 또한 이를 통해 장기적인 추세를 설명하려고 시도하는 동시에 팬데믹의 영향을 정량화하려고 하기보다는 팬데믹 전후의 수치를 비교할 수 있습니다.</p>
<p>다시 <strong><code>lubridate</code></strong>의 <code><a href="https://lubridate.tidyverse.org/reference/year.html">year()</a></code>를 사용하여 추출된 연도를 새 열로 저장하고 <strong><code>dplyr</code></strong>의 <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> 함수를 사용하여 <code>longbeach</code> 데이터 세트를 필터링하여 2017년과 2023년의 행만 고려할 수 있습니다. 일부 동물 유형은 연간 데이터로 집계하더라도 숫자가 매우 작으므로 <code><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code>를 사용하여 이미 존재하는 <code>"other"</code> 범주에 더 많은 동물 유형을 포함할 것입니다. 그런 다음 <strong><code>dplyr</code></strong>의 <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code>를 사용하여 관심 있는 각 연도에 각 동물 유형이 얼마나 많이 입소했는지 계산합니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># subset data for years and combine aninmal types</span></span>
<span><span class="va">intake_data</span> <span class="op">&lt;-</span> <span class="va">longbeach</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">intake_date</span><span class="op">)</span>,</span>
<span>    animal_type <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span></span>
<span>      <span class="va">animal_type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>        <span class="st">"dog"</span>, <span class="st">"cat"</span>, <span class="st">"bird"</span>,</span>
<span>        <span class="st">"wild"</span>, <span class="st">"reptile"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="va">animal_type</span>,</span>
<span>      <span class="st">"other"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2017</span>, <span class="fl">2023</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">animal_type</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">intake_data</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 6 × 3
   year animal_type     n
  &lt;dbl&gt; &lt;chr&gt;       &lt;int&gt;
1  2017 bird          352
2  2017 cat          2228
3  2017 dog          1743
4  2017 other         230
5  2017 reptile        57
6  2017 wild          216</code></pre>
</div>
</div>
<p>이제 데이터에는 2017년과 2023년(<code>year</code>) 각각의 각 동물 유형(<code>animal_type</code>)의 수(<code>n</code>)만 표시됩니다. 이 데이터를 어떻게 시각화할 수 있을까요? 떠오르는 몇 가지 분명한 옵션이 있습니다. 간단한 그룹 막대 차트, 슬로프 차트 또는 (자주 인기가 없는) 파이 차트입니다. 데이터 시각화의 선택은 우리가 보여주고자 하는 데이터의 측면에 따라 달라집니다. 2017년과 2023년을 비교하고 싶습니까? 다른 동물 유형의 상대적 수를 보고 싶습니까? 아니면 데이터의 값 범위를 보여주고 싶습니까? 이 데이터에서 가장 흥미로운 예는 아마도 2017년과 2023년을 비교하는 것일 것입니다. 슬로프 차트가 이 데이터에 잘 작동할 가능성이 높지만 게이지 차트로 조금 더 실험적으로 진행해 보겠습니다.</p>
<p>글을 쓰는 시점에는 <strong><code>ggplot2</code></strong>에 게이지 차트를 만드는 내장 함수가 없습니다. 게이지 차트를 들어 본 적이 없다면 <a href="#fig-longbeach-sketch" class="quarto-xref">Figure&nbsp;<span>5.4</span></a> 의 초기 스케치가 우리가 목표로 하는 것에 대한 아이디어를 줄 수 있습니다.</p>
</section><section id="탐색적-스케치" class="level3" data-number="5.2.2"><h3 data-number="5.2.2" class="anchored" data-anchor-id="탐색적-스케치">
<span class="header-section-number">5.2.2</span> 탐색적 스케치</h3>
<p>게이지 차트는 반원 위로 구부러진 누적 막대 차트라고 생각할 수 있습니다. 여기서는 하나의 누적 막대 차트 대신 두 개의 누적 막대 차트가 있습니다.</p>
<div id="fig-longbeach-sketch" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center" alt="단일 동물 유형에 대한 데이터를 시각화하기 위한 아이디어의 초기 스케치.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-sketch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/sketch-longbeach.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="단일 동물 유형에 대한 데이터를 시각화하기 위한 아이디어의 초기 스케치.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-sketch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.4: 단일 동물 유형에 대한 데이터를 시각화하기 위한 아이디어의 초기 스케치.
</figcaption></figure>
</div>
<p>게이지 차트에는 종종 값을 더 강조하기 위해 다이얼(또는 바늘)이 포함되지만 여러 개의 게이지가 있는 경우 조금 복잡해집니다. 그러니 지금은 그냥 둡시다. </p>
</section></section><section id="플롯-준비하기" class="level2" data-number="5.3"><h2 data-number="5.3" class="anchored" data-anchor-id="플롯-준비하기">
<span class="header-section-number">5.3</span> 플롯 준비하기</h2>
<p>게이지 차트는 <strong><code>ggplot2</code></strong>의 내장 기능이 아니므로 플로팅을 시작하기 전에 수동 준비를 조금 해야 합니다.</p>
<section id="데이터-랭글링" class="level3" data-number="5.3.1"><h3 data-number="5.3.1" class="anchored" data-anchor-id="데이터-랭글링">
<span class="header-section-number">5.3.1</span> 데이터 랭글링</h3>
<p><strong><code>ggplot2</code></strong>에서 기본적으로 게이지 차트를 만들기 위해 <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code> 및 <code><a href="https://ggplot2.tidyverse.org/reference/coord_radial.html">coord_polar()</a></code>를 사용할 <em>수</em> 있습니다. 그러나 <strong><code>ggplot2</code></strong>에서 극좌표를 사용하면 주석과 같은 요소를 원하는 위치에 추가하기 어려운 경우가 많습니다. 그러니 약간 다른 방식으로 게이지 차트를 만들어 봅시다! </p>
<p>게이지 차트는 일반적으로 목표나 제한에 대한 진행 상황을 표시하는 데 사용됩니다. 예를 들어 백분율로 제공된 데이터를 고려할 때 100%가 일반적인 상한입니다. 우리 데이터의 경우 보호소의 최대 수용 인원을 알고 있다면 적절한 선택이 될 것입니다. 그러나 그 정보가 없으므로 <em>자연적인</em> 제한이 없습니다.</p>
<p>따라서 다음과 같은 합리적인 것을 결정해야 합니다:</p>
<ul>
<li>모든 연도에 걸쳐 입소한 모든 동물의 최대 수</li>
<li>선택한 연도에 걸쳐 입소한 모든 동물의 최대 수</li>
<li>모든 연도에 걸쳐 입소한 단일 유형 동물의 최대 수</li>
<li>선택한 연도에 걸쳐 입소한 단일 유형 동물의 최대 수</li>
</ul>
<p>어떤 의미에서 선택은 상당히 임의적이며 강조하려는 내용에 따라 다릅니다. 여기서는 선택한 연도에 걸쳐 입소한 단일 유형 동물의 최대 수를 사용합니다. <code><a href="https://rdrr.io/r/base/Round.html">ceiling()</a></code>을 사용하여 가장 가까운 500으로 반올림하여 <em>더 좋은</em> 상한을 제공합니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">max_intake</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">intake_data</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="va">upper_limit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="va">max_intake</span> <span class="op">/</span> <span class="fl">500</span><span class="op">)</span> <span class="op">*</span> <span class="fl">500</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">max_intake</span>, <span class="va">upper_limit</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code>[1] 2228 2500</code></pre>
</div>
</div>
<div id="tip-longbeach-rounding" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;5.1: R에서 숫자 반올림
</div>
</div>
<div class="callout-body-container callout-body">
<p>R에서 <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> 함수는 숫자를 반올림하는 데 사용할 수 있으며 <code>digits</code> 인수는 정밀도 수준을 지정합니다. 음수를 제공하면 10, 100, 1000 등으로 반올림할 수 있습니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">1234</span>, digits <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code>[1] 1230</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">1234</span>, digits <span class="op">=</span> <span class="op">-</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code>[1] 1200</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">1234</span>, digits <span class="op">=</span> <span class="op">-</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code>[1] 1000</code></pre>
</div>
</div>
<p>그러나 10의 거듭제곱이 아닌 숫자로 반올림하려면 해당 숫자로 나누고 반올림한 다음 다시 숫자를 곱할 수 있습니다. <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code>를 <code><a href="https://rdrr.io/r/base/Round.html">floor()</a></code> 또는 <code><a href="https://rdrr.io/r/base/Round.html">ceiling()</a></code>으로 바꾸면 각각 내림 또는 올림을 할 수 있습니다.</p>
</div>
</div>
<p><code>n</code>을 선택한 상한으로 나누어 각 범주에 대해 해당 제한(<code>value</code>)에 대해 얼마나 진전이 있었는지 확인합시다. 나중에 플롯하기 쉽게 하기 위해 각 범주가 해당 제한(<code>no_value</code>)에서 얼마나 떨어져 있는지도 계산합니다. <code>n</code> 열은 더 이상 필요하지 않으므로 <strong><code>dplyr</code></strong>의 <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>를 사용하여 삭제합니다. </p>
<p>그런 다음 <strong><code>tidyr</code></strong>의 <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code> 및 <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a></code> 함수를 사용하여 데이터를 긴 형식으로 피벗했다가 다시 되돌립니다. 그 결과 각 동물 유형에 대해 데이터에 두 개의 행이 생성됩니다. (i) 2017년과 2023년 제한에 대한 백분율에 대한 행 하나, (ii) 2017년과 2023년 제한으로부터의 백분율에 대한 행 하나입니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">intake_YN</span> <span class="op">&lt;-</span> <span class="va">intake_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    value <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="va">upper_limit</span>,</span>
<span>    no_value <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">value</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">value</span>, <span class="va">no_value</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"YN"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"perc"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    values_from <span class="op">=</span> <span class="st">"perc"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>YN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">YN</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>누적 막대 차트(즉, 펼쳐진 게이지 차트)를 만드는 것을 생각해 보면 각 막대의 끝점(각 막대의 최대 y축 값)을 알아야 합니다. 이것은 각 그룹의 백분율이 아니라 각 그룹과 그 아래에 쌓인 그룹의 누적 백분율입니다. <code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code> 함수를 사용하여 각 연도 및 동물 유형에 걸쳐 누적 합계를 계산합니다: </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="va">intake_YN</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">animal_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    ymax_2017 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">`2017`</span><span class="op">)</span>,</span>
<span>    ymax_2023 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">`2023`</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">plot_data</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 6 × 6
# Groups:   animal_type [3]
  animal_type YN       `2017` `2023` ymax_2017 ymax_2023
  &lt;chr&gt;       &lt;fct&gt;     &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 bird        value     0.141  0.101     0.141     0.101
2 bird        no_value  0.859  0.899     1         1    
3 cat         value     0.891  0.767     0.891     0.767
4 cat         no_value  0.109  0.233     1         1    
5 dog         value     0.697  0.564     0.697     0.564
6 dog         no_value  0.303  0.436     1         1    </code></pre>
</div>
</div>
<p><code>no_value</code> 행에 대한 <code>ymax_*</code> 값은 항상 <code>1</code>이라는 것을 알 수 있습니다. 이는 <code>no_value</code>가 마지막 막대이므로 해당 막대를 완료할 때쯤이면 항상 데이터의 100%를 플로팅했을 것이기 때문입니다. 데이터는 현재 여전히 <code>animal_type</code>별로 그룹화되어 있다는 점에 유의하십시오. 이것은 나중에 중요할 것입니다!</p>
</section><section id="ggforce-확장-패키지" class="level3" data-number="5.3.2"><h3 data-number="5.3.2" class="anchored" data-anchor-id="ggforce-확장-패키지">
<span class="header-section-number">5.3.2</span> <strong><code>ggforce</code></strong> 확장 패키지</h3>
<p><strong><code>ggforce</code></strong> 확장 패키지 <span class="citation" data-cites="ggforce">(<a href="references.html#ref-ggforce" role="doc-biblioref">Pedersen 2022</a>)</span>는 <strong><code>ggplot2</code></strong>의 동작을 확장하는 많은 유용한 함수를 포함하고 있으며, 그중 많은 함수가 탐색적 데이터 시각화를 목표로 합니다. 이 장에서는 많은 함수를 다루지 않고 대신 게이지 차트를 만드는 데 사용하는 방법에 초점을 맞출 것입니다. <strong><code>ggforce</code></strong>는 CRAN에서 사용할 수 있으며 일반적인 <code>install.packages("ggforce")</code> 명령으로 설치할 수 있습니다.</p>
</section><section id="ggforce를-사용한-게이지-차트" class="level3" data-number="5.3.3"><h3 data-number="5.3.3" class="anchored" data-anchor-id="ggforce를-사용한-게이지-차트">
<span class="header-section-number">5.3.3</span> <strong><code>ggforce</code></strong>를 사용한 게이지 차트</h3>
<p>게이지 차트를 만드는 목적을 위해 관심 있는 함수는 <code><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar()</a></code> 입니다. <code><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar()</a></code> 함수를 사용하면 <strong><code>ggplot2</code></strong>에서 호를 그릴 수 있습니다. 이 함수를 사용하여 도넛 차트나 선버스트 플롯과 같은 시각화를 만들 수도 있습니다. 이중 게이지 차트를 만들기 위해 <code><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar()</a></code>를 두 번 호출합니다 - 하나는 2017년 호용이고 다른 하나는 2023년 호용입니다. <code><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar()</a></code>를 사용할 때 필요한 몇 가지 필수 미학이 있습니다:</p>
<ul>
<li>
<code>x0</code>: 게이지 차트가 놓인 원의 중심의 x 좌표입니다. 우리에게 이것은 상수 값이 될 것이므로 아무 숫자나 선택할 수 있습니다 - <code>0</code>이 분명한 선택인 것 같습니다.</li>
<li>
<code>y0</code>: 게이지 차트가 놓인 원의 중심의 y 좌표입니다. 우리에게 이것은 상수 값이 될 것이므로 아무 숫자나 선택할 수 있습니다 - 다시 <code>0</code>이 분명한 선택인 것 같습니다.</li>
<li>
<code>r0</code>: 호의 내부 반지름(<code>x0</code> 및 <code>y0</code>에서).</li>
<li>
<code>r</code>: 호의 외부 반지름(<code>x0</code> 및 <code>y0</code>에서). <code>r0</code>와 <code>r</code>의 차이는 게이지 차트의 두께를 결정합니다. 우리가 그릴 두 호 각각에 대해 이것들은 일정할 것입니다. 외부 호(2023)의 경우 <code>r0 = 0.7</code> 및 <code>r</code> = 1로 설정할 수 있고 내부 호(2017)의 경우 <code>r0 = 0.2</code> 및 <code>r</code> = 0.5로 설정할 수 있습니다. 두 호의 반지름 차이는 0.3이므로 두께가 동일하다는 점에 유의하십시오.</li>
<li>
<code>start</code>: 호의 각 세그먼트의 시작 각도.</li>
<li>
<code>end</code>: 호의 각 세그먼트의 끝 각도.</li>
</ul>
<p>우리가 해야 할 데이터 랭글링의 마지막 부분은 <code>start</code> 및 <code>end</code> 값을 계산하는 것입니다.</p>
</section><section id="미학-계산" class="level3" data-number="5.3.4"><h3 data-number="5.3.4" class="anchored" data-anchor-id="미학-계산">
<span class="header-section-number">5.3.4</span> 미학 계산</h3>
<p>끝 값은 쉽습니다. 이미 가지고 있는 <code>ymax_2017</code> 및 <code>ymax_2023</code> 열입니다. 동등한 <code>ymin_2017</code> 및 <code>ymin_2023</code> 값을 계산해야 합니다. 각 누적 막대 차트의 최소값은 무엇일까요?</p>
<p>잠시 게이지 차트 대신 누적 막대 차트를 다시 생각해 봅시다(시각화하기가 조금 더 쉽기 때문입니다). 스택 맨 아래에 있는 첫 번째 막대의 최소값은 항상 0이 될 것입니다. 맨 아래에 있기 때문입니다. 나머지 누적 막대의 경우 최소값은 그 아래에 쌓인 막대의 최대값과 같을 것입니다. 이는 우리가 필요한 모든 값을 이미 계산하여 <code>plot_data</code>에 저장했음을 의미합니다. 이제 약간 재정렬하기만 하면 됩니다.</p>
<div id="tip-longbeach-ymin" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;5.2: 할 수 있다고 해서 해야 하는 것은 아닙니다
</div>
</div>
<div class="callout-body-container callout-body">
<p>기본 R에는 코드 줄 수가 적고 읽기 쉬운 더 좋은 방법이 거의 확실히 있습니다. 다음 코드 블록은 우리가 <em>해야 하는지</em> 고려하지 않고 파이프형 워크플로에서 이 작업을 <em>할 수 있는지</em> 확인하는 실험으로 간주하십시오!</p>
</div>
</div>
<p>2017년 데이터부터 시작하겠습니다. 먼저 <code>rep(0, n_types)</code>를 사용하여 첫 번째 누적 막대의 최소값에 대해 <code>0</code> 값을 생성합니다. 2017년에는 각 동물 유형에 대해 하나의 <code>0</code>이 필요하기 때문입니다. 그런 다음 마지막 항목을 제외한 <code>plot_data</code>에서 <code>ymax_2017</code> 값을 가져오려고 합니다. 따라서 <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_head()</a></code>를 사용하여 이 행의 하위 집합을 가져옵니다(각 동물 유형에서 마지막 항목이 누락됨). <code>plot_data</code>는 여전히 <code>animal_type</code>별로 그룹화되어 있다는 것을 기억하십시오. 그런 다음 이 <code>ymax_2017</code>을 생성한 <code>0</code>에 붙이고 <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>를 사용하여 <code>ymin_2017</code>이라는 새 열에 전달합니다. 2023년 호에 대한 코드는 유사합니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">n_types</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">plot_data</span><span class="op">$</span><span class="va">animal_type</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">ymin_data</span> <span class="op">&lt;-</span> <span class="va">plot_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># start values for 2017 arc</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    ymin_2017 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n_types</span><span class="op">)</span>,</span>
<span>      <span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_head</a></span><span class="op">(</span><span class="va">plot_data</span>, n <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">ymax_2017</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># repeat for 2023</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    ymin_2023 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n_types</span><span class="op">)</span>,</span>
<span>      <span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_head</a></span><span class="op">(</span><span class="va">plot_data</span>, n <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">ymax_2023</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>우리의 모든 변수는 현재 0과 1 사이의 척도로 조정되어 있습니다(제한에 대한 백분율과 관련이 있기 때문입니다). 하지만 이것을 호로 그리려면 극좌표로 변환해야 합니다. 호를 <span class="math inline">\(-\pi/2\)</span>(0 대신)에서 시작하고 <span class="math inline">\(\pi/2\)</span>(1 대신)에서 끝내려고 합니다. <strong><code>scales</code></strong> 패키지 <span class="citation" data-cites="scales">(<a href="references.html#ref-scales" role="doc-biblioref">Wickham, Pedersen, and Seidel 2023</a>)</span>의 <code><a href="https://scales.r-lib.org/reference/rescale.html">rescale()</a></code> 함수를 사용하여 <code>from</code>과 <code>to</code>로 스케일링할 범위를 정의할 수 있습니다. </p>
<p>소문자 <code>"y"</code>로 시작하는 <code>ymin_data</code>의 모든 열, 즉 모든 <code>ymax_*</code> 및 <code>ymin_*</code> 열에 이것을 적용하고 싶으므로 <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with()</a></code> 열 선택기 함수와 함께 <strong><code>dplyr</code></strong>의 <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> 및 <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code>를 사용합니다. <strong><code>dplyr</code></strong>가 <code>YN</code> 열도 다시 스케일링하는 것을 방지하기 위해 <code>ignore.case = FALSE</code>를 설정해야 합니다. </p>
<div id="tip-longbeach-mutate" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;5.3: <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>의 이전 버전
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong><code>dplyr</code></strong>의 이전 버전에서는 <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> 및 <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> 대신 <code><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at()</a></code> 함수가 사용되었습니다. <code><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at()</a></code> 함수는 이제 대체되었습니다.</p>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">gauge_data</span> <span class="op">&lt;-</span> <span class="va">ymin_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"y"</span>, ignore.case <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>      <span class="op">~</span> <span class="fu"><a href="https://scales.r-lib.org/reference/rescale.html">rescale</a></span><span class="op">(</span><span class="va">.</span>,</span>
<span>        to <span class="op">=</span> <span class="va">pi</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        from <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">gauge_data</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre data-code-line-numbers=""><code># A tibble: 6 × 8
  animal_type YN       `2017` `2023` ymax_2017 ymax_2023
  &lt;chr&gt;       &lt;fct&gt;     &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 bird        value     0.141  0.101    -1.13     -1.25 
2 bird        no_value  0.859  0.899     1.57      1.57 
3 cat         value     0.891  0.767     1.23      0.839
4 cat         no_value  0.109  0.233     1.57      1.57 
5 dog         value     0.697  0.564     0.620     0.200
6 dog         no_value  0.303  0.436     1.57      1.57 
# ℹ 2 more variables: ymin_2017 &lt;dbl&gt;, ymin_2023 &lt;dbl&gt;</code></pre>
</div>
</div>
</section><section id="첫-번째-플롯" class="level3" data-number="5.3.5"><h3 data-number="5.3.5" class="anchored" data-anchor-id="첫-번째-플롯">
<span class="header-section-number">5.3.5</span> 첫 번째 플롯</h3>
<p>이제 데이터 랭글링이 끝났고(드디어!) 첫 번째 플롯을 만들 준비가 되었습니다. 항상 그렇듯이 <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> 함수로 시작하고 호를 그리는 데 사용할 <code>gauge_data</code>를 전달합니다. 각 호의 미학은 다양하므로 전역적으로 전달하는 것을 보류합니다. </p>
<p>그런 다음 <code><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar()</a></code>를 두 번 사용하여 두 개의 호를 추가합니다. 위에서 설명한 대로 <code>x0</code>, <code>y0</code>, <code>r0</code>, <code>r</code> 상수를 설정합니다. 미학에 대해 상수 값을 선택했더라도 <em>필수</em> 미학이므로 <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> 함수 안에 있어야 합니다. 그런 다음 <code>ymin_*</code> 및 <code>ymax_*</code> 열을 <code>start</code> 및 <code>end</code> 미학으로 전달하고 <code>YN</code> 열을 기반으로 <code>fill</code> 색상을 설정합니다. </p>
<p>또한 <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>을 사용하여 각 동물 유형에 대한 호 쌍을 별도의 패싯에 그리고 <code>nrow = 2</code>를 사용하여 6개국에 대한 멋진 직사각형 3x2 그리드 패싯을 제공하도록 선택합니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">basic_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gauge_data</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Outer 2023 arc</span></span>
<span>  <span class="fu"><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x0 <span class="op">=</span> <span class="fl">0</span>, y0 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      r0 <span class="op">=</span> <span class="fl">0.7</span>, r <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      start <span class="op">=</span> <span class="va">ymin_2023</span>, end <span class="op">=</span> <span class="va">ymax_2023</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">YN</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Inner 2017 arc</span></span>
<span>  <span class="fu"><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x0 <span class="op">=</span> <span class="fl">0</span>, y0 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      r0 <span class="op">=</span> <span class="fl">0.2</span>, r <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>      start <span class="op">=</span> <span class="va">ymin_2017</span>, end <span class="op">=</span> <span class="va">ymax_2017</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">YN</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">animal_type</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">basic_plot</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-basic-plot-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-basic-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-basic-plot-1-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-basic-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.5: Initial plot created using <code><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar()</a></code> from <code>ggforce</code>, faceted by different animal types.
</figcaption></figure>
</div>
</div>
</div>
</section></section><section id="고급-스타일링" class="level2" data-number="5.4"><h2 data-number="5.4" class="anchored" data-anchor-id="고급-스타일링">
<span class="header-section-number">5.4</span> 고급 스타일링</h2>
<p>이제 이중 게이지 차트가 생겼습니다. 하지만 훨씬 더 보기 좋게(그리고 더 유익하게) 만들 수 있습니다!</p>
<section id="색상" class="level3" data-number="5.4.1"><h3 data-number="5.4.1" class="anchored" data-anchor-id="색상">
<span class="header-section-number">5.4.1</span> 색상</h3>
<p>색상에 대한 몇 가지 변수를 정의하는 것으로 시작하겠습니다. 여기서 우리는 목표에 대한 백분율, 즉 입소한 동물 수를 보여주는 세그먼트에 사용할 분홍색 <code>highlight_col</code>을 정의합니다. 이것은 우리가 전달하려는 요점이기 때문에 밝고 눈길을 끄는 색상이어야 합니다. <code>second_col</code>은 목표에 대해 남은 백분율을 보여주는 데 사용되므로 배경과 조금 더 유사한 색상을 선택할 수 있습니다. 배경(<code>bg_col</code>)은 밝은 회색, <code>second_col</code>은 중간 회색, 텍스트(<code>text_col</code>)는 검은색이 됩니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">highlight_col</span> <span class="op">&lt;-</span> <span class="st">"#990C58"</span></span>
<span><span class="va">second_col</span> <span class="op">&lt;-</span> <span class="st">"#949398"</span></span>
<span><span class="va">bg_col</span> <span class="op">&lt;-</span> <span class="st">"#DEDEDE"</span></span>
<span><span class="va">text_col</span> <span class="op">&lt;-</span> <span class="st">"black"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>게이지 차트에 새 색상을 추가하기 전에 세그먼트 주변의 검은색 윤곽선을 제거해 보겠습니다. 플롯에 아무것도 추가하지 않는 꽤 두꺼운 선입니다. 우리가 선택한 새 색상으로 세그먼트 사이에 충분한 대비가 있을 것입니다. 미적 매핑 외부에서 <code>color = NA</code>를 설정하여 호에서 윤곽선을 제거할 수 있습니다. </p>
<div class="cell" data-source-line-numbers="9,18">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26" data-source-line-numbers="9,18" data-code-line-numbers="9,18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">basic_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gauge_data</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x0 <span class="op">=</span> <span class="fl">0</span>, y0 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      r0 <span class="op">=</span> <span class="fl">0.7</span>, r <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      start <span class="op">=</span> <span class="va">ymin_2023</span>, end <span class="op">=</span> <span class="va">ymax_2023</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">YN</span></span>
<span>    <span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="cn">NA</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>      x0 <span class="op">=</span> <span class="fl">0</span>, y0 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      r0 <span class="op">=</span> <span class="fl">0.2</span>, r <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>      start <span class="op">=</span> <span class="va">ymin_2017</span>, end <span class="op">=</span> <span class="va">ymax_2017</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">YN</span></span>
<span>    <span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="cn">NA</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">animal_type</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>이제 <strong><code>ggplot2</code></strong>의 <code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual()</a></code>을 사용하여 색상을 적용할 수 있습니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">color_plot</span> <span class="op">&lt;-</span> <span class="va">basic_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"value"</span>, <span class="st">"no_value"</span><span class="op">)</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">highlight_col</span>, <span class="va">second_col</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">color_plot</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-color-plot" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Edited version of the previous plot with colors changed from defaults to gray and dark pink.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-color-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-color-plot-1.png" class="img-fluid figure-img" alt="Edited version of the previous plot with colors changed from defaults to gray and dark pink.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-color-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.6: Edited version of the previous plot with colors changed from defaults to gray and dark pink.
</figcaption></figure>
</div>
</div>
</div>
<p>시각화를 위한 색상을 선택할 때 그룹을 구분하거나 정보를 전달하기 위해 색상과 범례에 너무 많이 의존하지 않는 것이 중요합니다. 색각 이상(색맹이라고도 함)은 다양한 형태로 나타나며 유형에 따라 사람들이 색상을 인식하는 방식이 다릅니다. 차트가 색각 이상이 있는 사람들에게 접근 가능한지 확인하는 한 가지 방법은 회색조(흑백)로 보고 색상 없이 이해할 수 있는지 확인하는 것입니다. 그럴 수 없다면 다른 색상을 선택하거나 모양과 패턴을 사용하여 그룹을 구별하는 것을 고려하십시오. 범례를 피할 수 없을 때 데이터를 직접 레이블링하고 범례의 순서가 데이터의 순서와 일치하는지 확인하면 도움이 될 수 있습니다 <span class="citation" data-cites="GAcharts">(<a href="references.html#ref-GAcharts" role="doc-biblioref">Government Analysis Function 2021</a>)</span>. </p>
<p>R에는 색상 팔레트의 접근성을 조사하는 데 사용할 수 있는 여러 패키지가 있습니다. 그중 하나는 <strong><code>colorblindr</code></strong> <span class="citation" data-cites="colorblindr">(<a href="references.html#ref-colorblindr" role="doc-biblioref">McWhite and Wilke 2024</a>)</span>입니다. <strong><code>colorblindr</code></strong> 패키지를 사용하면 색맹이 있는 사람에게 차트가 어떻게 보일지 시뮬레이션할 수 있습니다. 이 패키지에는 관련 <strong><code>ggplot2</code></strong> 함수가 있는 색맹 친화적인 질적 팔레트도 포함되어 있습니다. 글을 쓰는 시점에서 <strong><code>colorblindr</code></strong>은 CRAN에서 사용할 수 없지만 <a href="bee-colonies.html" class="quarto-xref"><span>Chapter 4</span></a> 에 설명된 방법을 사용하여 GitHub에서 설치할 수 있습니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/colorblindr/man/cvd_grid.html">cvd_grid</a></span><span class="op">(</span><span class="va">color_plot</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-cvd" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A 2x2 grid of charts showing simulations of how the current chart might appear to people with each of four different types of color vision deficiency.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-cvd-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-cvd-1.png" class="img-fluid figure-img" alt="A 2x2 grid of charts showing simulations of how the current chart might appear to people with each of four different types of color vision deficiency.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-cvd-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.7: A 2x2 grid of charts showing simulations of how the current chart might appear to people with each of four different types of color vision deficiency.
</figcaption></figure>
</div>
</div>
</div>
<p><strong><code>ggplot2</code></strong>의 기본 색상 팔레트는 회색조로 볼 때 구분이 되지 않으므로 차트에 어떤 색상을 사용할지 생각하는 것이 중요합니다.</p>
</section><section id="텍스트-및-글꼴" class="level3" data-number="5.4.2"><h3 data-number="5.4.2" class="anchored" data-anchor-id="텍스트-및-글꼴">
<span class="header-section-number">5.4.2</span> 텍스트 및 글꼴</h3>
<p>이전 장에서 보았듯이 <strong><code>sysfonts</code></strong> 및 <strong><code>showtext</code></strong> 패키지를 사용하여 Google 글꼴을 로드할 수 있습니다. 여기서는 제목과 본문 모두에 <code>"Ubuntu"</code> 서체를 사용하여 깔끔하고 미니멀하게 유지합니다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_add_google.html">font_add_google</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Ubuntu"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/showtext/man/showtext_auto.html">showtext_auto</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/showtext/man/showtext_opts.html">showtext_opts</a></span><span class="op">(</span>dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span>
<span><span class="va">body_font</span> <span class="op">&lt;-</span> <span class="st">"Ubuntu"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>제목과 부제목에 대한 텍스트를 정의해 보겠습니다. 여기서 제목은 차트의 핵심 메시지를 정의하여 독자가 그래픽을 훑어보더라도 요점을 이해할 수 있도록 합니다. 부제목은 플롯을 해석하는 방법에 대한 간단한 설명을 제공하고 독자가 가져가기를 원하는 주요 결론을 반복합니다. <code>caption</code> 변수는 이 시각화에 대한 데이터 소스와 차트 작성자를 식별합니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">title</span> <span class="op">&lt;-</span> <span class="st">"The number of animals surrendered is lower in 2023 compared to 2017"</span></span>
<span><span class="va">subtitle</span> <span class="op">&lt;-</span> <span class="st">"The inner pink bar represents the number of animals surrendered in 2017, whilst the outer pink bar represents the number in 2023. A decrease is seen across all types of animals."</span></span>
<span><span class="va">caption</span> <span class="op">&lt;-</span> <span class="st">"Data: City of Long Beach Animal Care Services | Graphic: N. Rennie"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>축 레이블은 <code><a href="https://ggforce.data-imaginist.com/reference/geom_arc_bar.html">geom_arc_bar()</a></code> 플롯에 큰 의미가 없으므로 나중에 <code>theme</code> 함수를 사용할 때 제거할 것입니다. 대신 게이지 끝에 <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code>를 사용하여 자체 레이블을 추가할 수 있습니다. 더 쉽게 하기 위해 텍스트 레이블을 추가하기 위한 작은 <code>data.frame</code>을 구성할 수 있습니다. 여기에는 텍스트가 위치해야 하는 <code>x</code> 및 <code>y</code> 좌표(아직 축 레이블을 삭제하지 않았으므로 이미 있는 그래프에서 읽을 수 있음)와 나타날 <code>label</code>이 포함됩니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">text_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.35</span>, <span class="fl">0.85</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.1</span>, <span class="op">-</span><span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2017</span>, <span class="fl">2023</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>그런 다음 방금 만든 텍스트 <code>data.frame</code>을 사용하여 <code>data</code> 인수를 지정해야 한다는 점에 유의하면서 <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code>가 있는 레이어를 추가하여 기존 플롯에 이 텍스트를 추가할 수 있습니다. 또한 <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code> 함수 내에서 서체와 크기를 직접 지정해야 하며 <strong><code>ggplot2</code></strong>의 <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code> 함수를 사용하여 이전에 만든 제목과 부제목 텍스트를 추가할 수 있습니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">text_plot</span> <span class="op">&lt;-</span> <span class="va">color_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">text_df</span>,</span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span>,</span>
<span>    family <span class="op">=</span> <span class="va">body_font</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="va">title</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="va">subtitle</span>,</span>
<span>    caption <span class="op">=</span> <span class="va">caption</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">text_plot</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-text" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Previous plot with additional labels indicating the year on each gauge chart, as well as an added title and subtitle.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-text-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-text-1.png" class="img-fluid figure-img" alt="Previous plot with additional labels indicating the year on each gauge chart, as well as an added title and subtitle.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-text-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.8: Previous plot with additional labels indicating the year on each gauge chart, as well as an added title and subtitle.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="테마-조정" class="level3" data-number="5.4.3"><h3 data-number="5.4.3" class="anchored" data-anchor-id="테마-조정">
<span class="header-section-number">5.4.3</span> 테마 조정</h3>
<p>회색 배경, 그리드 선 및 축 레이블과 같은 모든 테마 요소를 제거하는 것으로 시작하겠습니다. 가장 쉬운 방법은 <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void()</a></code>를 사용하는 것입니다. <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void()</a></code>의 <code>base_family</code> 인수를 사용하여 남아 있는 모든 비 geom 텍스트 요소에 기본적으로 사용될 서체를 설정할 수 있습니다.</p>
<p>현재 게이지 플롯이 약간 찌그러져 보이고 반원형이 아니라는 것을 눈치챘을 것입니다. 플롯 패널에 1:1 종횡비를 강제하는 <code><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed()</a></code> 를 추가하여 이 문제를 해결할 수 있습니다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">theme_plot</span> <span class="op">&lt;-</span> <span class="va">text_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">8.5</span>, base_family <span class="op">=</span> <span class="va">body_font</span><span class="op">)</span></span>
<span><span class="va">theme_plot</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-style-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Edited version of previous plot with fixed coordinate system to prevent squashing, and all theme elements removed">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-style-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-style-1-1.png" class="img-fluid figure-img" alt="Edited version of previous plot with fixed coordinate system to prevent squashing, and all theme elements removed">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-style-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.9: Edited version of previous plot with fixed coordinate system to prevent squashing, and all theme elements removed.
</figcaption></figure>
</div>
</div>
</div>
<p>보기가 더 좋아졌지만 여전히 훌륭하지는 않습니다. 스타일링으로 무엇을 더 개선해야 할까요?</p>
<ul>
<li>제목 텍스트가 눈에 띄지 않고 부제목, 패싯 텍스트와 너무 쉽게 섞입니다. 아마도 <strong>굵은</strong> 글꼴이 도움이 될까요?</li>
<li>부제목 텍스트가 페이지에 맞지 않지만 익숙해졌을 <strong><code>ggtext</code></strong>의 <code><a href="https://wilkelab.org/ggtext/reference/element_textbox.html">element_textbox_simple()</a></code> 함수를 사용하여 해결할 수 있습니다.</li>
<li>특정 종횡비를 강제로 사용하기 위해 <code><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed()</a></code>를 사용하고 있기 때문에 이제 꽤 이상한 간격 문제가 발생했습니다. 플롯의 상단과 하단에 큰 흰색 간격이 있고 연도 레이블이 하단에서 약간 잘렸습니다.</li>
<li>범례가 많은 공간을 차지하고 정보가 별로 없습니다.</li>
</ul>
<p> </p>
<p><code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> 요소를 편집하여 처음 두 가지 문제를 해결해 보겠습니다.</p>
<ul>
<li>부제목에 <code><a href="https://wilkelab.org/ggtext/reference/element_textbox.html">element_textbox_simple()</a></code>을 사용하여 텍스트를 왼쪽 정렬합니다.</li>
<li>제목과 패싯 <code>strip.text</code>에 대해 <code>face = "bold"</code>를 설정하고 <code><a href="https://ggplot2.tidyverse.org/reference/element.html">rel()</a></code> 함수를 사용하여 글꼴 크기를 늘립니다.</li>
<li>이전 시각화에서 했던 것처럼 배경색을 <code>bg_col</code>로 설정하고 <code>plot.margin</code> 인수를 설정하여 가장자리 주위에 패딩을 추가합니다.</li>
</ul>
<p></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">styled_plot</span> <span class="op">&lt;-</span> <span class="va">theme_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    plot.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span></span>
<span>      fill <span class="op">=</span> <span class="va">bg_col</span>, color <span class="op">=</span> <span class="va">bg_col</span></span>
<span>    <span class="op">)</span>,</span>
<span>    panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span></span>
<span>      fill <span class="op">=</span> <span class="va">bg_col</span>, color <span class="op">=</span> <span class="va">bg_col</span></span>
<span>    <span class="op">)</span>,</span>
<span>    strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span></span>
<span>      face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.2</span><span class="op">)</span>,</span>
<span>      margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>b <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span></span>
<span>      margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>b <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>      hjust <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      face <span class="op">=</span> <span class="st">"bold"</span>,</span>
<span>      size <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">rel</a></span><span class="op">(</span><span class="fl">1.2</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_textbox.html">element_textbox_simple</a></span><span class="op">(</span></span>
<span>      margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>b <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>      hjust <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      halign <span class="op">=</span> <span class="fl">0</span></span>
<span>    <span class="op">)</span>,</span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span></span>
<span>      margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>t <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>      hjust <span class="op">=</span> <span class="fl">0</span></span>
<span>    <span class="op">)</span>,</span>
<span>    plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">styled_plot</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-style-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Further styling of gauge chart to change background color, prevent overlapping in the subtitle text, and increase the size of the title.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-style-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-style-2-1.png" class="img-fluid figure-img" alt="Further styling of gauge chart to change background color, prevent overlapping in the subtitle text, and increase the size of the title.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-style-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.10: Further styling of gauge chart to change background color, prevent overlapping in the subtitle text, and increase the size of the title.
</figcaption></figure>
</div>
</div>
</div>
<p>거의 다 왔지만 연도 레이블 텍스트가 약간 찌그러져 있습니다. 문제의 일부는 범례가 차지하는 공간의 양입니다. 오른쪽 상단과 하단 모서리에 너무 많은 빈 공간을 남겨두고 더 필요한 다른 곳의 공간을 빼앗아갑니다. 이것은 차트를 개발할 때 흔히 발생하는 문제를 강조합니다. 시각화의 크기는 얼마나 커야 할까요? 이미지의 올바른 크기를 선택하는 것은 플롯에서 고정된 종횡비를 사용할 때(예: <code><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed()</a></code> 또는 공간 좌표를 사용할 때 - <a href="time-zones.html" class="quarto-xref"><span>Chapter 12</span></a> 에서 볼 수 있음) 특히 중요합니다. 잘못 선택하면 플롯이 잘리거나 여분의 공백이 생길 수 있기 때문입니다. </p>
<div id="tip-longbeach-aspect" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;5.4: 종횡비 선택
</div>
</div>
<div class="callout-body-container callout-body">
<p>너비와 높이에 대해 생각하는 것보다 종횡비와 너비(또는 높이)에 대해 생각하는 것이 더 도움이 될 때가 많습니다. 이렇게 하면 이미지 크기를 늘리는 과정이 조금 더 쉬워지는 경우가 많습니다. </p>
<p>일반적으로 사용되는 종횡비가 있습니다(예: 4x6, 5x7 또는 1x1). 일반적으로 사용되는 종횡비를 선택하면 특히 웹 사이트나 슬라이드에서 여러 플롯을 정렬하기가 더 쉬울 수 있습니다. 출판물의 일부로 플롯을 만드는 경우 일부 학술지나 잡지에는 특정 종횡비 요구 사항이 있을 수 있습니다. 그렇지 않으면 탐색적 스케치를 사용하여 적절한 종횡비를 결정하십시오.</p>
</div>
</div>
<div id="tip-longbeach-width" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;5.5: 너비 선택
</div>
</div>
<div class="callout-body-container callout-body">
<p>종종 너비 선택은 물리적 제약에 따라 달라질 수 있습니다. 예를 들어 이 책의 시각화는 모두 인쇄판 페이지에 맞게 약 5인치 너비입니다. 여러 크기의 이미지(예: 저해상도 및 고해상도)를 원할 수도 있습니다.</p>
<p>플롯의 너비(또는 해상도)를 변경하면 종종 글꼴 크기와 같이 반드시 더 크게 재조정되지 않는 다른 측면도 변경해야 함을 의미합니다. <code>base_size</code>를 설정하고 <code><a href="https://ggplot2.tidyverse.org/reference/element.html">rel()</a></code>을 사용하여 개별 글꼴 크기 요소를 편집하면 작업량을 최소화할 수 있습니다. 원하는 크기와 해상도로 플롯을 보면 크기를 올바르게 설정하기가 더 쉽습니다. 자세한 내용은 <a href="other-tricks.html#sec-camcorder" class="quarto-xref"><span>Section 14.1</span></a> 를 참조하십시오.</p>
</div>
</div>
</section><section id="전통적인-범례의-대안" class="level3" data-number="5.4.4"><h3 data-number="5.4.4" class="anchored" data-anchor-id="전통적인-범례의-대안">
<span class="header-section-number">5.4.4</span> 전통적인 범례의 대안</h3>
<p>플롯의 높이를 늘려 연도 레이블이 찌그러지는 것을 막을 수도 있지만 대안적인 접근 방식은 문제의 근원을 해결하고 범례를 편집하는 것입니다.</p>
<p>범례를 처리하는 데는 몇 가지 다른 옵션이 있습니다.</p>
<ul>
<li><p>범례를 그대로 두되 오른쪽이 아닌 주 차트 위나 아래로 위치를 변경하고 한 줄로 만듭니다. 그러면 공간을 덜 차지할 것입니다. 범례 위치 변경은 <a href="doctors.html" class="quarto-xref"><span>Chapter 11</span></a> 에서 논의할 것입니다.</p></li>
<li><p>사용자 정의 범례를 디자인할 수 있습니다. 이중 게이지 차트는 흔하지 않고 독자에게 생소할 수 있으므로 이 옵션이 좋을 수 있습니다. 작동 방식에 대한 추가 정보를 추가하면 도움이 될 수 있습니다. <a href="time-zones.html" class="quarto-xref"><span>Chapter 12</span></a> 및 <a href="us-elections.html" class="quarto-xref"><span>Chapter 13</span></a> 에서 사용자 정의 범례를 디자인하고 사용하는 방법을 살펴보겠습니다.</p></li>
<li><p>대신 부제목에 색상 텍스트를 사용하여 범주가 무엇인지 나타낼 수 있습니다. 이 시각화의 경우 진한 분홍색 범주를 강조 표시하고 설명하는 것으로 충분할 것입니다. R에서 이를 수행하는 방법은 <a href="wind-turbines.html" class="quarto-xref"><span>Chapter 6</span></a> 및 <a href="cats.html" class="quarto-xref"><span>Chapter 7</span></a> 에서 살펴보겠습니다.</p></li>
</ul>
<p>여기에는 어떤 형태의 범례도 사실상 불필요하다는 주장이 있을 수 있습니다. 현재의 색상 선택과 차트 제목은 진한 분홍색이 데이터의 동물 수(목표에 대한 백분율)를 나타낸다는 것을 충분히 명확하게 보여줍니다.</p>
<p>따라서 <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> 내부에서 <code>legend.position = "none"</code>을 설정하여 범례를 제거해 봅시다. </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">styled_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="fig-longbeach-style-3" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Final styling of gauge chart to remove the legend, providing more space for the chart area.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-longbeach-style-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="animal-intakes_files/figure-html/fig-longbeach-style-3-1.png" class="img-fluid figure-img" alt="Final styling of gauge chart to remove the legend, providing more space for the chart area.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longbeach-style-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.11: Final styling of gauge chart to remove the legend, providing more space for the chart area.
</figcaption></figure>
</div>
</div>
</div>
<p>그런 다음 <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code>로 저장합니다: </p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="st">"animal-intakes.png"</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">0.7</span> <span class="op">*</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section></section><section id="성찰" class="level2" data-number="5.5"><h2 data-number="5.5" class="anchored" data-anchor-id="성찰">
<span class="header-section-number">5.5</span> 성찰</h2>
<p>게이지 차트가 이 데이터를 시각화하는 가장 효과적인 방법일까요? 아니요. 게이지 차트에는 고유한 문제가 있으며 그중 일부를 여기에서 볼 수 있습니다. 2023년을 나타내는 링이 바깥쪽에 있으므로 반지름이 더 크고 따라서 면적도 더 큽니다. 2017년과 2023년 사이의 호 길이 변화를 측정하면 이 두 가지에 대한 면적의 비례적 변화를 측정했을 때와 다른 답을 얻을 수 있습니다. 여기서는 2023년 값이 2017년 값보다 일관되게 낮지만 더 많은 공간을 차지합니다. 게이지 차트 아이디어를 고수한다고 가정할 때 이 플롯을 개선하기 위해 어떤 추가 변경을 할 수 있을까요?</p>
<ul>
<li><p>패싯 레이블을 좀 더 멋지게 서식을 지정할 수 있습니다(예: 대문자 사용, <em>wild</em> 대신 <em>wild animals</em> 사용). 패싯을 전체적으로 가장 높은 것에서 가장 낮은 것으로 정렬하면 읽기가 얼마나 쉬운지도 향상될 것입니다.</p></li>
<li><p>정확한 수를 레이블 텍스트로 제공하면 입소의 변화를 보기가 더 쉬워질 것입니다. 6가지 동물 유형 모두에서 감소가 있었음이 합리적으로 명확하지만 게이지 차트의 특성(그리드 선 없음)으로 인해 정확한 값을 얻기가 꽤 어렵습니다. 2017년에 개와 고양이의 차이점은 무엇입니까? 여기서는 말하기가 너무 어렵습니다.</p></li>
<li><p>현재 선택이 다소 임의적으므로 상한에 대해 더 직관적인 값을 얻고 사용합니다. 찾을 수 없다면 슬로프 차트와 같은 더 간단한 차트 유형으로 돌아가는 더 많은 동기가 될 수 있습니다.</p></li>
<li><p>여기서는 전체적인 전통적 범례가 불필요할 수 있지만 색상 텍스트를 추가하면 분홍색 영역이 주요 데이터를 나타낸다는 설명이 추가될 수 있습니다. <a href="wind-turbines.html" class="quarto-xref"><span>Chapter 6</span></a> 및 <a href="cats.html" class="quarto-xref"><span>Chapter 7</span></a> 에서 전설 대신 색상 텍스트를 사용하는 것을 살펴보겠습니다.</p></li>
</ul></section><section id="연습-문제" class="level2" data-number="5.6"><h2 data-number="5.6" class="anchored" data-anchor-id="연습-문제">
<span class="header-section-number">5.6</span> 연습 문제</h2>
<ul>
<li><p>게이지 차트 대신 막대 차트를 사용하여 이 시각화를 다시 디자인하고 차트에 직접 백분율 값을 표시하는 레이블을 추가하십시오.</p></li>
<li><p>레이아웃을 개선하기 위해 종횡비나 좌표계를 변경해야 합니까?</p></li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Anscombe1973" class="csl-entry" role="listitem">
Anscombe, F. J. 1973. <span>“Graphs in Statistical Analysis.”</span> <em>The American Statistician</em> 27 (1): 17–21. <a href="https://doi.org/10.1080/00031305.1973.10478966">https://doi.org/10.1080/00031305.1973.10478966</a>.
</div>
<div id="ref-aphalo2024" class="csl-entry" role="listitem">
Aphalo, Pedro J. 2024. <em><span class="nocase">Learn R: As a Language</span></em>. Second Edition. CRC Press. <a href="https://www.learnr-book.info/">https://www.learnr-book.info/</a>.
</div>
<div id="ref-egg" class="csl-entry" role="listitem">
Auguie, Baptiste. 2019. <em><span class="nocase">egg: Extensions for ’ggplot2’: Custom Geom, Custom Themes, Plot Alignment, Labelled Panels, Symmetric Scales, and Fixed Panel Size</span></em>. <a href="https://CRAN.R-project.org/package=egg">https://CRAN.R-project.org/package=egg</a>.
</div>
<div id="ref-imager" class="csl-entry" role="listitem">
Barthelme, Simon. 2024. <em><span class="nocase">imager: Image Processing Library Based on ’CImg’</span></em>. <a href="https://CRAN.R-project.org/package=imager">https://CRAN.R-project.org/package=imager</a>.
</div>
<div id="ref-vandenBrandv4" class="csl-entry" role="listitem">
Brand, Teun van den. 2025. <span>“<span class="nocase">ggplot2 4.0.0</span>.”</span> <a href="https://www.tidyverse.org/blog/2025/09/ggplot2-4-0-0/" class="uri">https://www.tidyverse.org/blog/2025/09/ggplot2-4-0-0/</a>.
</div>
<div id="ref-bridson2007" class="csl-entry" role="listitem">
Bridson, Robert. 2007. <span>“Fast Poisson Disk Sampling in Arbitrary Dimensions.”</span> In <em>ACM SIGGRAPH 2007 Sketches</em>. SIGGRAPH ’07. New York, NY, USA: Association for Computing Machinery. <a href="https://doi.org/10.1145/1278780.1278807">https://doi.org/10.1145/1278780.1278807</a>.
</div>
<div id="ref-Brown2009" class="csl-entry" role="listitem">
Brown, Mark J.F., and Paxton, Robert J. 2009. <span>“The Conservation of Bees: A Global Perspective.”</span> <em>Apidologie</em> 40 (3): 410–16. <a href="https://doi.org/10.1051/apido/2009019">https://doi.org/10.1051/apido/2009019</a>.
</div>
<div id="ref-geomtextpath" class="csl-entry" role="listitem">
Cameron, Allan, and Teun van den Brand. 2024. <em><span class="nocase">geomtextpath: Curved Text in ’ggplot2’</span></em>. <a href="https://CRAN.R-project.org/package=geomtextpath">https://CRAN.R-project.org/package=geomtextpath</a>.
</div>
<div id="ref-cartocolors" class="csl-entry" role="listitem">
CARTO. 2016. <em><span>’CARTOColors’ Palettes</span></em>. <a href="https://carto.com/carto-colors/">https://carto.com/carto-colors/</a>.
</div>
<div id="ref-extrafont" class="csl-entry" role="listitem">
Chang, Winston. 2023. <em><span class="nocase">extrafont</span>: Tools for Using Fonts</em>. <a href="https://CRAN.R-project.org/package=extrafont">https://CRAN.R-project.org/package=extrafont</a>.
</div>
<div id="ref-dumbbell" class="csl-entry" role="listitem">
Cheung, Foo. 2021. <em><span class="nocase">dumbbell</span>: Displaying Changes Between Two Points Using Dumbbell Plots</em>. <a href="https://CRAN.R-project.org/package=dumbbell">https://CRAN.R-project.org/package=dumbbell</a>.
</div>
<div id="ref-ggannotate" class="csl-entry" role="listitem">
Cowgill, Matt, and John Helveston. 2021. <em><span class="nocase">ggannotate: Interactively Annotate ggplot2 Plots</span></em>. <a href="https://github.com/MattCowgill/ggannotate">https://github.com/MattCowgill/ggannotate</a>.
</div>
<div id="ref-pak" class="csl-entry" role="listitem">
Csárdi, Gábor, and Jim Hester. 2024. <em><span class="nocase">pak: Another Approach to Package Installation</span></em>. <a href="https://CRAN.R-project.org/package=pak">https://CRAN.R-project.org/package=pak</a>.
</div>
<div id="ref-remotes" class="csl-entry" role="listitem">
Csárdi, Gábor, Jim Hester, Hadley Wickham, Winston Chang, Martin Morgan, and Dan Tenenbaum. 2024. <em><span class="nocase">remotes: R Package Installation from Remote Repositories, Including ’GitHub’</span></em>. <a href="https://CRAN.R-project.org/package=remotes">https://CRAN.R-project.org/package=remotes</a>.
</div>
<div id="ref-ggview" class="csl-entry" role="listitem">
Domin, Iaroslav. 2024. <em><span class="nocase">ggview: ’ggplot2’ Picture Previewer</span></em>. <a href="https://CRAN.R-project.org/package=ggview">https://CRAN.R-project.org/package=ggview</a>.
</div>
<div id="ref-tidyplots" class="csl-entry" role="listitem">
Engler, Jan Broder. 2024. <span>“Tidyplots Empowers Life Scientists with Easy Code-Based Data Visualization.”</span> <em>bioRxiv</em>. <a href="https://doi.org/10.1101/2024.11.08.621836">https://doi.org/10.1101/2024.11.08.621836</a>.
</div>
<div id="ref-ggpattern" class="csl-entry" role="listitem">
FC, Mike, Trevor L. Davis, and ggplot2 authors. 2024. <em><span class="nocase">ggpattern: ’ggplot2’ Pattern Geoms</span></em>. <a href="https://CRAN.R-project.org/package=ggpattern">https://CRAN.R-project.org/package=ggpattern</a>.
</div>
<div id="ref-flaticon" class="csl-entry" role="listitem">
Flaticon.com. 2024. <span>“<span>Wind Power Flaticon</span>.”</span> <a href="https://www.flaticon.com/free-icon/wind-power_5670189" class="uri">https://www.flaticon.com/free-icon/wind-power_5670189</a>.
</div>
<div id="ref-fontawesome" class="csl-entry" role="listitem">
Font Awesome. 2024. <span>“<span>Font Awesome 6</span>.”</span> <a href="https://fontawesome.com/" class="uri">https://fontawesome.com/</a>.
</div>
<div id="ref-Hullman2021" class="csl-entry" role="listitem">
Franconeri, Steven L., Lace M. Padilla, Priti Shah, Jeffrey M. Zacks, and Jessica Hullman. 2021. <span>“The Science of Visual Data Communication: What Works.”</span> <em>Psychological Science in the Public Interest</em> 22 (3): 110–61. <a href="https://doi.org/10.1177/15291006211051956">https://doi.org/10.1177/15291006211051956</a>.
</div>
<div id="ref-viridis" class="csl-entry" role="listitem">
Garnier, Simon, Ross, Noam, Rudis, Robert, Camargo, et al. 2024. <em><span class="nocase">viridis(Lite)</span> - Colorblind-Friendly Color Maps for <span>R</span></em>. <a href="https://doi.org/10.5281/zenodo.4679423">https://doi.org/10.5281/zenodo.4679423</a>.
</div>
<div id="ref-ggiraph" class="csl-entry" role="listitem">
Gohel, David, and Panagiotis Skintzos. 2024. <em><span class="nocase">ggiraph: Make ’ggplot2’ Graphics Interactive</span></em>. <a href="https://CRAN.R-project.org/package=ggiraph">https://CRAN.R-project.org/package=ggiraph</a>.
</div>
<div id="ref-GAcharts" class="csl-entry" role="listitem">
Government Analysis Function. 2021. <span>“Data Visualisation: Colours.”</span> <a href="https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/" class="uri">https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/</a>.
</div>
<div id="ref-geofacet" class="csl-entry" role="listitem">
Hafen, Ryan. 2023. <em><span class="nocase">geofacet</span>: <span class="nocase">’ggplot2’</span> Faceting Utilities for Geographical Data</em>. <a href="https://CRAN.R-project.org/package=geofacet">https://CRAN.R-project.org/package=geofacet</a>.
</div>
<div id="ref-harmon2024" class="csl-entry" role="listitem">
Harmon, Jon. 2024. <em><span class="nocase">Web APIs with R</span></em>. <span>CRC Press</span>. <a href="https://wapir.io/">https://wapir.io/</a>.
</div>
<div id="ref-lintr" class="csl-entry" role="listitem">
Hester, Jim, Florent Angly, Russ Hyde, Michael Chirico, Kun Ren, Alexander Rosenstock, and Indrajeet Patil. 2024. <em><span class="nocase">lintr</span>: A ’Linter’ for <span>R</span> Code</em>. <a href="https://CRAN.R-project.org/package=lintr">https://CRAN.R-project.org/package=lintr</a>.
</div>
<div id="ref-glue" class="csl-entry" role="listitem">
Hester, Jim, and Jennifer Bryan. 2024. <em><span class="nocase">glue</span>: Interpreted String Literals</em>. <a href="https://glue.tidyverse.org/">https://glue.tidyverse.org/</a>.
</div>
<div id="ref-camcorder" class="csl-entry" role="listitem">
Hughes, Ellis. 2022a. <em><span class="nocase">camcorder</span>: Record Your Plot History</em>. <a href="https://CRAN.R-project.org/package=camcorder">https://CRAN.R-project.org/package=camcorder</a>.
</div>
<div id="ref-tidytuesdayR" class="csl-entry" role="listitem">
———. 2022b. <em><span class="nocase">tidytuesdayR</span>: Access the Weekly ’TidyTuesday’ Project Dataset</em>. <a href="https://CRAN.R-project.org/package=tidytuesdayR">https://CRAN.R-project.org/package=tidytuesdayR</a>.
</div>
<div id="ref-paletteer" class="csl-entry" role="listitem">
Hvitfeldt, Emil. 2021. <em><span class="nocase">paletteer</span>: Comprehensive Collection of Color Palettes</em>. <a href="https://github.com/EmilHvitfeldt/paletteer">https://github.com/EmilHvitfeldt/paletteer</a>.
</div>
<div id="ref-animalshelter" class="csl-entry" role="listitem">
———. 2025. <em><span class="nocase">animalshelter</span>: Animal Shelter Data</em>. <a href="https://github.com/EmilHvitfeldt/animalshelter">https://github.com/EmilHvitfeldt/animalshelter</a>.
</div>
<div id="ref-fontawesomeR" class="csl-entry" role="listitem">
Iannone, Richard. 2024. <em><span class="nocase">fontawesome: Easily Work with ’Font Awesome’ Icons</span></em>. <a href="https://CRAN.R-project.org/package=fontawesome">https://CRAN.R-project.org/package=fontawesome</a>.
</div>
<div id="ref-zones_data" class="csl-entry" role="listitem">
Internet Assigned Numbers Authority. 2023. <span>“The <span class="nocase">tz</span> Database: Time Zone and Daylight Saving Time Data.”</span> <span>Internet Assigned Numbers Authority</span>. <a href="https://data.iana.org/time-zones/tz-link.html">https://data.iana.org/time-zones/tz-link.html</a>.
</div>
<div id="ref-img_jax" class="csl-entry" role="listitem">
Jax (@lysrix). 2017. <span>“Lemur.”</span> <a href="https://unsplash.com/photos/red-and-white-rodent-h5xrh3CNT-k">https://unsplash.com/photos/red-and-white-rodent-h5xrh3CNT-k</a>.
</div>
<div id="ref-kays2020" class="csl-entry" role="listitem">
Kays, R., R. R. Dunn, A. W. Parsons, B. Mcdonald, T. Perkins, S. A. Powers, L. Shell, et al. 2020. <span>“The Small Home Ranges and Large Local Ecological Impacts of Pet Cats.”</span> <em>Animal Conservation</em> 23 (5): 516–23. <a href="https://doi.org/10.1111/acv.12563">https://doi.org/10.1111/acv.12563</a>.
</div>
<div id="ref-r4rest" class="csl-entry" role="listitem">
Keyes, David. 2024. <em><span class="nocase">R for the Rest of Us: A Statistics-Free Introduction</span></em>. No Starch Press. <a href="https://book.rfortherestofus.com/">https://book.rfortherestofus.com/</a>.
</div>
<div id="ref-longbeach_data" class="csl-entry" role="listitem">
Long Beach Animal Shelter. 2025. <span>“<span>Animal Shelter Data</span>.”</span> City of Long Beach Animal Care Services. <a href="https://data.longbeach.gov/explore/dataset/animal-shelter-intakes-and-outcomes/information/">https://data.longbeach.gov/explore/dataset/animal-shelter-intakes-and-outcomes/information/</a>.
</div>
<div id="ref-Vizumap" class="csl-entry" role="listitem">
Lucchesi, Lydia, and Petra Kuhnert. 2020. <em><span>Vizumap</span>: Visualizing Uncertainty in Spatial Data</em>. <a href="https://github.com/lydialucchesi/Vizumap">https://github.com/lydialucchesi/Vizumap</a>.
</div>
<div id="ref-museums_data" class="csl-entry" role="listitem">
Mapping Museums. 2021. <span>“Mapping Museums Data.”</span> <a href="https://www.mappingmuseums.org">www.mappingmuseums.org</a>.
</div>
<div id="ref-rnaturalearth" class="csl-entry" role="listitem">
Massicotte, Philippe, and Andy South. 2023. <em><span class="nocase">rnaturalearth</span>: World Map Data from Natural Earth</em>. <a href="https://docs.ropensci.org/rnaturalearth/">https://docs.ropensci.org/rnaturalearth/</a>.
</div>
<div id="ref-Matejka2017" class="csl-entry" role="listitem">
Matejka, Justin, and George Fitzmaurice. 2017. <span>“Same Stats, Different Graphs: Generating Datasets with Varied Appearance and Identical Statistics Through Simulated Annealing.”</span> In, 1290–94. <a href="https://doi.org/10.1145/3025453.3025912">https://doi.org/10.1145/3025453.3025912</a>.
</div>
<div id="ref-cats_data" class="csl-entry" role="listitem">
McDonald, J. L., and H. Cole. 2020. <span>“Data from: The Small Home Ranges and Large Local Ecological Impacts of Pet Cats [United Kingdom].”</span> Movebank data repository. <a href="https://doi.org/doi:10.5441/001/1.pf315732">https://doi.org/doi:10.5441/001/1.pf315732</a>.
</div>
<div id="ref-colorblindr" class="csl-entry" role="listitem">
McWhite, Claire D., and Claus O. Wilke. 2024. <em><span class="nocase">colorblindr: Simulate colorblindness in R figures</span></em>. <a href="https://github.com/clauswilke/colorblindr">https://github.com/clauswilke/colorblindr</a>.
</div>
<div id="ref-Apiculture" class="csl-entry" role="listitem">
Mid-Atlantic Apiculture Research and Extension Consortium. 2024. <span>“Seasonal Cycles of Activities in Colonies.”</span> <a href="https://canr.udel.edu/maarec/honey-bee-biology/seasonal-cycles-of-activities-in-colonies/" class="uri">https://canr.udel.edu/maarec/honey-bee-biology/seasonal-cycles-of-activities-in-colonies/</a>.
</div>
<div id="ref-poissoned" class="csl-entry" role="listitem">
mikefc. 2024. <em><span class="nocase">poissoned: Tileable Poisson Disc Sampling</span></em>. <a href="https://github.com/coolbutuseless/poissoned">https://github.com/coolbutuseless/poissoned</a>.
</div>
<div id="ref-MetBrewer" class="csl-entry" role="listitem">
Mills, Blake Robert. 2022. <em><span>MetBrewer</span>: Color Palettes Inspired by Works at the Metropolitan Museum of Art</em>. <a href="https://CRAN.R-project.org/package=MetBrewer">https://CRAN.R-project.org/package=MetBrewer</a>.
</div>
<div id="ref-elections_data" class="csl-entry" role="listitem">
MIT Election Data and Science Lab. 2017. <span>“<span>U.S. House 1976–2022</span>.”</span> Harvard Dataverse. <a href="https://doi.org/10.7910/DVN/IG0UN2">https://doi.org/10.7910/DVN/IG0UN2</a>.
</div>
<div id="ref-styler" class="csl-entry" role="listitem">
Müller, Kirill, and Lorenz Walthert. 2023. <em><span class="nocase">styler</span>: Non-Invasive Pretty Printing of <span>R</span> Code</em>. <a href="https://CRAN.R-project.org/package=styler">https://CRAN.R-project.org/package=styler</a>.
</div>
<div id="ref-tibble" class="csl-entry" role="listitem">
Müller, Kirill, and Hadley Wickham. 2023. <em><span class="nocase">tibble</span>: Simple Data Frames</em>. <a href="https://CRAN.R-project.org/package=tibble">https://CRAN.R-project.org/package=tibble</a>.
</div>
<div id="ref-Muth2018" class="csl-entry" role="listitem">
Muth, Lisa. 2018. <span>“An Alternative to Pink &amp; Blue: Colors for Gender Data.”</span> <a href="https://blog.datawrapper.de/gendercolor/" class="uri">https://blog.datawrapper.de/gendercolor/</a>.
</div>
<div id="ref-turbines_data" class="csl-entry" role="listitem">
Natural Resources Canada. 2021. <span>“Canadian Wind Turbine Database.”</span> Natural Resources Canada (Government of Canada). <a href="https://open.canada.ca/data/en/dataset/79fdad93-9025-49ad-ba16-c26d718cc070">https://open.canada.ca/data/en/dataset/79fdad93-9025-49ad-ba16-c26d718cc070</a>.
</div>
<div id="ref-ggbranding" class="csl-entry" role="listitem">
Noblet, Guillaume. 2025. <em><span class="nocase">ggbranding: Add Personal Branding to ’ggplot2’ Charts</span></em>. <a href="https://github.com/gnoblet/ggbranding">https://github.com/gnoblet/ggbranding</a>.
</div>
<div id="ref-rcartocolor" class="csl-entry" role="listitem">
Nowosad, Jakub. 2018. <em><span>’CARTOColors’ Palettes</span></em>. <a href="https://jakubnowosad.com/rcartocolor/">https://jakubnowosad.com/rcartocolor/</a>.
</div>
<div id="ref-magick" class="csl-entry" role="listitem">
Ooms, Jeroen. 2024. <em><span class="nocase">magick: Advanced Graphics and Image-Processing in R</span></em>. <a href="https://CRAN.R-project.org/package=magick">https://CRAN.R-project.org/package=magick</a>.
</div>
<div id="ref-doctors_data" class="csl-entry" role="listitem">
Our World in Data. 2019. <span>“Medical Doctors Per 1,000 People.”</span> <a href="https://ourworldindata.org/grapher/physicians-per-1000-people">https://ourworldindata.org/grapher/physicians-per-1000-people</a>.
</div>
<div id="ref-sf" class="csl-entry" role="listitem">
Pebesma, Edzer. 2018. <span>“<span class="nocase">Simple Features for R: Standardized Support for Spatial Vector Data</span>.”</span> <em><span>The R Journal</span></em> 10 (1): 439–46. <a href="https://doi.org/10.32614/RJ-2018-009">https://doi.org/10.32614/RJ-2018-009</a>.
</div>
<div id="ref-ggforce" class="csl-entry" role="listitem">
Pedersen, Thomas Lin. 2022. <em><span class="nocase">ggforce</span>: Accelerating <span class="nocase">’ggplot2’</span></em>. <a href="https://CRAN.R-project.org/package=ggforce">https://CRAN.R-project.org/package=ggforce</a>.
</div>
<div id="ref-patchwork" class="csl-entry" role="listitem">
———. 2024. <em><span class="nocase">patchwork</span>: The Composer of Plots</em>. <a href="https://CRAN.R-project.org/package=patchwork">https://CRAN.R-project.org/package=patchwork</a>.
</div>
<div id="ref-Pedersen2025" class="csl-entry" role="listitem">
———. 2025. <span>“<span class="nocase">Fonts in R</span>.”</span> <a href="https://www.tidyverse.org/blog/2025/05/fonts-in-r/" class="uri">https://www.tidyverse.org/blog/2025/05/fonts-in-r/</a>.
</div>
<div id="ref-marquee" class="csl-entry" role="listitem">
Pedersen, Thomas Lin, and Martin Mitáš. 2024. <em><span class="nocase">marquee: Markdown Parser and Renderer for R Graphics</span></em>. <a href="https://CRAN.R-project.org/package=marquee">https://CRAN.R-project.org/package=marquee</a>.
</div>
<div id="ref-systemfonts" class="csl-entry" role="listitem">
Pedersen, Thomas Lin, Jeroen Ooms, and Devon Govett. 2024. <em><span class="nocase">systemfonts: System Native Font Finding</span></em>. <a href="https://CRAN.R-project.org/package=systemfonts">https://CRAN.R-project.org/package=systemfonts</a>.
</div>
<div id="ref-ragg" class="csl-entry" role="listitem">
Pedersen, Thomas Lin, and Maxim Shemanarev. 2023. <em><span class="nocase">ragg</span>: Graphic Devices Based on <span>AGG</span></em>. <a href="https://CRAN.R-project.org/package=ragg">https://CRAN.R-project.org/package=ragg</a>.
</div>
<div id="ref-pldb_data" class="csl-entry" role="listitem">
PLDB contributors. 2022. <span>“<span>PLDB</span>: A Programming Language Database.”</span> <em><span>PLDB</span></em>. <a href="https://pldb.com">https://pldb.com</a>.
</div>
<div id="ref-sysfonts" class="csl-entry" role="listitem">
Qiu, Yixuan. 2022. <em><span class="nocase">sysfonts</span>: Loading Fonts into <span>R</span></em>. <a href="https://CRAN.R-project.org/package=sysfonts">https://CRAN.R-project.org/package=sysfonts</a>.
</div>
<div id="ref-showtext" class="csl-entry" role="listitem">
———. 2023. <em><span class="nocase">showtext</span>: Using Fonts More Easily in <span>R</span> Graphs</em>. <a href="https://CRAN.R-project.org/package=showtext">https://CRAN.R-project.org/package=showtext</a>.
</div>
<div id="ref-rproj" class="csl-entry" role="listitem">
R Core Team. 2024. <em><span>R</span>: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-tidytuesday" class="csl-entry" role="listitem">
R4DS Online Learning Community. 2023. <span>“Tidy Tuesday: A Weekly Social Data Project.”</span> <a href="https://github.com/rfordatascience/tidytuesday">https://github.com/rfordatascience/tidytuesday</a>.
</div>
<div id="ref-social_icons" class="csl-entry" role="listitem">
Rennie, Nicola. 2023a. <span>“Adding Social Media Icons to Charts with <span class="nocase">ggplot2</span>.”</span> <a href="https://nrennie.rbind.io/blog/adding-social-media-icons-ggplot2/">https://nrennie.rbind.io/blog/adding-social-media-icons-ggplot2/</a>.
</div>
<div id="ref-template_files" class="csl-entry" role="listitem">
———. 2023b. <span>“Creating Template Files with <span>R</span>.”</span> <a href="https://nrennie.rbind.io/blog/script-templates-r/">https://nrennie.rbind.io/blog/script-templates-r/</a>.
</div>
<div id="ref-streamline" class="csl-entry" role="listitem">
———. 2023c. <span>“Four Ways to Streamline Your <span>R</span> Workflows.”</span> <a href="https://nrennie.rbind.io/blog/four-ways-streamline-r-workflows/">https://nrennie.rbind.io/blog/four-ways-streamline-r-workflows/</a>.
</div>
<div id="ref-ggtextcircle" class="csl-entry" role="listitem">
———. 2024a. <em><span class="nocase">ggtextcircle: Circular Text in ’ggplot2’</span></em>. <a href="https://github.com/nrennie/ggtextcircle">https://github.com/nrennie/ggtextcircle</a>.
</div>
<div id="ref-nobel" class="csl-entry" role="listitem">
———. 2024b. <em><span class="nocase">nobel: Access data from the Nobel Prize API via R</span></em>. <a href="https://github.com/nrennie/nobel">https://github.com/nrennie/nobel</a>.
</div>
<div id="ref-pkgs_data" class="csl-entry" role="listitem">
———. 2024c. <span>“<span class="nocase">tidytuesday</span>.”</span> <em>GitHub Repository</em>. GitHub. <a href="https://github.com/nrennie/tidytuesday">https://github.com/nrennie/tidytuesday</a>.
</div>
<div id="ref-signif2024a" class="csl-entry" role="listitem">
Rennie, Nicola, and Andreas Krause. 2024. <span>“<span class="nocase">Presenting data the Significance way - Part 1</span>.”</span> <em>Significance</em> 21 (3): 36–39. <a href="https://doi.org/10.1093/jrssig/qmae045">https://doi.org/10.1093/jrssig/qmae045</a>.
</div>
<div id="ref-Reynolds2025" class="csl-entry" role="listitem">
Reynolds, Gina. 2025. <span>“<span class="nocase">Everyday ggplot2 extension</span>.”</span> <a href="https://evamaerey.github.io/everyday_ggplot2_extension/" class="uri">https://evamaerey.github.io/everyday_ggplot2_extension/</a>.
</div>
<div id="ref-hex_forcats" class="csl-entry" role="listitem">
RStudio. 2018a. <span>“<span class="nocase">forcats</span> Hex Sticker.”</span> <a href="https://github.com/rstudio/hex-stickers/blob/main/PNG/forcats.png">https://github.com/rstudio/hex-stickers/blob/main/PNG/forcats.png</a>.
</div>
<div id="ref-hex_ggplot2" class="csl-entry" role="listitem">
———. 2018b. <span>“<span class="nocase">ggplot2</span> Hex Sticker.”</span> <a href="https://github.com/rstudio/hex-stickers/blob/main/PNG/ggplot2.png">https://github.com/rstudio/hex-stickers/blob/main/PNG/ggplot2.png</a>.
</div>
<div id="ref-hex_purrr" class="csl-entry" role="listitem">
———. 2018c. <span>“<span class="nocase">purrr</span> Hex Sticker.”</span> <a href="https://github.com/rstudio/hex-stickers/blob/main/PNG/purrr.png">https://github.com/rstudio/hex-stickers/blob/main/PNG/purrr.png</a>.
</div>
<div id="ref-hex_readr" class="csl-entry" role="listitem">
———. 2018d. <span>“<span class="nocase">readr</span> Hex Sticker.”</span> <a href="https://github.com/rstudio/hex-stickers/blob/main/PNG/readr.png">https://github.com/rstudio/hex-stickers/blob/main/PNG/readr.png</a>.
</div>
<div id="ref-hex_tibble" class="csl-entry" role="listitem">
———. 2018e. <span>“<span class="nocase">tibble</span> Hex Sticker.”</span> <a href="https://github.com/rstudio/hex-stickers/blob/main/PNG/tibble.png">https://github.com/rstudio/hex-stickers/blob/main/PNG/tibble.png</a>.
</div>
<div id="ref-hex_dplyr" class="csl-entry" role="listitem">
———. 2020a. <span>“<span class="nocase">dplyr</span> Hex Sticker.”</span> <a href="https://github.com/rstudio/hex-stickers/blob/main/PNG/dplyr.png">https://github.com/rstudio/hex-stickers/blob/main/PNG/dplyr.png</a>.
</div>
<div id="ref-hex_stringr" class="csl-entry" role="listitem">
———. 2020b. <span>“<span class="nocase">stringr</span> Hex Sticker.”</span> <a href="https://github.com/rstudio/hex-stickers/blob/main/PNG/stringr.png">https://github.com/rstudio/hex-stickers/blob/main/PNG/stringr.png</a>.
</div>
<div id="ref-hex_tidyr" class="csl-entry" role="listitem">
———. 2020c. <span>“<span class="nocase">tidyr</span> Hex Sticker.”</span> <a href="https://github.com/rstudio/hex-stickers/blob/main/PNG/tidyr.png">https://github.com/rstudio/hex-stickers/blob/main/PNG/tidyr.png</a>.
</div>
<div id="ref-ggalt" class="csl-entry" role="listitem">
Rudis, Bob, Ben Bolker, and Jan Schulz. 2017. <em><span class="nocase">ggalt: Extra Coordinate Systems, ’Geoms’, Statistical Transformations, Scales and Fonts for ’ggplot2’</span></em>. <a href="https://CRAN.R-project.org/package=ggalt">https://CRAN.R-project.org/package=ggalt</a>.
</div>
<div id="ref-waffle" class="csl-entry" role="listitem">
Rudis, Bob, and Dave Gandy. 2023. <em><span class="nocase">waffle</span>: Create Waffle Chart Visualizations</em>. <a href="https://CRAN.R-project.org/package=waffle">https://CRAN.R-project.org/package=waffle</a>.
</div>
<div id="ref-lattice" class="csl-entry" role="listitem">
Sarkar, Deepayan. 2008. <em>Lattice: Multivariate Data Visualization with r</em>. New York: Springer. <a href="http://lmdvr.r-forge.r-project.org">http://lmdvr.r-forge.r-project.org</a>.
</div>
<div id="ref-openxlsx" class="csl-entry" role="listitem">
Schauberger, Philipp, and Alexander Walker. 2023. <em><span class="nocase">openxlsx: Read, Write and Edit xlsx Files</span></em>. <a href="https://CRAN.R-project.org/package=openxlsx">https://CRAN.R-project.org/package=openxlsx</a>.
</div>
<div id="ref-owidapi" class="csl-entry" role="listitem">
Scheuch, Christoph. 2025. <em><span class="nocase">owidapi</span>: Access the Our World in Data Chart API</em>. <a href="https://doi.org/10.32614/CRAN.package.owidapi">https://doi.org/10.32614/CRAN.package.owidapi</a>.
</div>
<div id="ref-GGally" class="csl-entry" role="listitem">
Schloerke, Barret, Di Cook, Joseph Larmarange, Francois Briatte, Moritz Marbach, Edwin Thoen, Amos Elberg, and Jason Crowley. 2024. <em><span class="nocase">GGally: Extension to ’ggplot2’</span></em>. <a href="https://CRAN.R-project.org/package=GGally">https://CRAN.R-project.org/package=GGally</a>.
</div>
<div id="ref-Schloss" class="csl-entry" role="listitem">
Schloss, Karen B., Connor C. Gramazio, Allison T. Silverman, Madeline L. Parker, and Audrey S. Wang. 2019. <span>“Mapping Color to Meaning in Colormap Data Visualizations.”</span> <em>IEEE Transactions on Visualization and Computer Graphics</em> 25 (1): 810–19. <a href="https://doi.org/10.1109/TVCG.2018.2865147">https://doi.org/10.1109/TVCG.2018.2865147</a>.
</div>
<div id="ref-funspotr" class="csl-entry" role="listitem">
Shalloway, Bryan. 2023. <em><span class="nocase">funspotr: Spot R Functions &amp; Packages</span></em>. <a href="https://CRAN.R-project.org/package=funspotr">https://CRAN.R-project.org/package=funspotr</a>.
</div>
<div id="ref-plotly" class="csl-entry" role="listitem">
Sievert, Carson. 2020. <em>Interactive Web-Based Data Visualization with r, Plotly, and Shiny</em>. Chapman; Hall/CRC. <a href="https://plotly-r.com">https://plotly-r.com</a>.
</div>
<div id="ref-ggrepel" class="csl-entry" role="listitem">
Slowikowski, Kamil. 2024. <em><span class="nocase">ggrepel: Automatically Position Non-Overlapping Text Labels with ’ggplot2’</span></em>. <a href="https://CRAN.R-project.org/package=ggrepel">https://CRAN.R-project.org/package=ggrepel</a>.
</div>
<div id="ref-visdat" class="csl-entry" role="listitem">
Tierney, Nicholas. 2017. <span>“<span class="nocase">visdat: Visualising Whole Data Frames</span>.”</span> <em>JOSS</em> 2 (16): 355. <a href="https://doi.org/10.21105/joss.00355">https://doi.org/10.21105/joss.00355</a>.
</div>
<div id="ref-naniar" class="csl-entry" role="listitem">
Tierney, Nicholas, and Dianne Cook. 2023. <span>“Expanding Tidy Data Principles to Facilitate Missing Data Exploration, Visualization and Assessment of Imputations.”</span> <em>Journal of Statistical Software</em> 105 (7): 1–31. <a href="https://doi.org/10.18637/jss.v105.i07">https://doi.org/10.18637/jss.v105.i07</a>.
</div>
<div id="ref-Tol2021" class="csl-entry" role="listitem">
Tol, Paul. 2021. <span>“<span class="nocase">Paul Tol’s Notes: Colour schemes and templates</span>.”</span> <a href="https://sronpersonalpages.nl/~pault/" class="uri">https://sronpersonalpages.nl/~pault/</a>.
</div>
<div id="ref-UScensuspop" class="csl-entry" role="listitem">
United States Census Bureau. 2021a. <span>“Historical Population Change Data (1910-2020).”</span> <a href="https://www.census.gov/data/tables/time-series/dec/popchange-data-text.html" class="uri">https://www.census.gov/data/tables/time-series/dec/popchange-data-text.html</a>.
</div>
<div id="ref-UScensus" class="csl-entry" role="listitem">
———. 2021b. <span>“State Area Measurements and Internal Point Coordinates.”</span> <a href="https://www.census.gov/geographies/reference-files/2010/geo/state-area.html" class="uri">https://www.census.gov/geographies/reference-files/2010/geo/state-area.html</a>.
</div>
<div id="ref-bees_data" class="csl-entry" role="listitem">
United States Department of Agriculture: Economics, Statistics and Market Information System. 2022. <span>“Honey Bee Colonies.”</span> <span>USDA Economics, Statistics and Market Information System</span>. <a href="https://usda.library.cornell.edu/concern/publications/rn301137d">https://usda.library.cornell.edu/concern/publications/rn301137d</a>.
</div>
<div id="ref-crsuggest" class="csl-entry" role="listitem">
Walker, Kyle. 2022. <em><span class="nocase">crsuggest: Obtain Suggested Coordinate Reference System Information for Spatial Data</span></em>. <a href="https://CRAN.R-project.org/package=crsuggest">https://CRAN.R-project.org/package=crsuggest</a>.
</div>
<div id="ref-Wanzer2021" class="csl-entry" role="listitem">
Wanzer, Dana Linnell, Tarek Azzam, Natalie D. Jones, and Darrel Skousen. 2021. <span>“The Role of Titles in Enhancing Data Visualization.”</span> <em>Evaluation and Program Planning</em> 84: 101896. <a href="https://doi.org/10.1016/j.evalprogplan.2020.101896">https://doi.org/10.1016/j.evalprogplan.2020.101896</a>.
</div>
<div id="ref-ggplot2" class="csl-entry" role="listitem">
Wickham, Hadley. 2016. <em><span class="nocase">ggplot2</span>: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-forcats" class="csl-entry" role="listitem">
———. 2023a. <em><span class="nocase">forcats</span>: Tools for Working with Categorical Variables (Factors)</em>. <a href="https://doi.org/10.32614/CRAN.package.forcats">https://doi.org/10.32614/CRAN.package.forcats</a>.
</div>
<div id="ref-stringr" class="csl-entry" role="listitem">
———. 2023b. <em><span class="nocase">stringr: Simple, Consistent Wrappers for Common String Operations</span></em>. <a href="https://CRAN.R-project.org/package=stringr">https://CRAN.R-project.org/package=stringr</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“Welcome to the <span class="nocase">tidyverse</span>.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-readxl" class="csl-entry" role="listitem">
Wickham, Hadley, and Jennifer Bryan. 2023. <em><span class="nocase">readxl: Read Excel Files</span></em>. <a href="https://CRAN.R-project.org/package=readxl">https://CRAN.R-project.org/package=readxl</a>.
</div>
<div id="ref-r4ds" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garrett Grolemund. 2023. <em><span>R</span> for Data Science</em>. Second Edition. O-Reilly. <a href="https://r4ds.hadley.nz">https://r4ds.hadley.nz</a>.
</div>
<div id="ref-dplyr" class="csl-entry" role="listitem">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. <em><span class="nocase">dplyr</span>: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.
</div>
<div id="ref-purrr" class="csl-entry" role="listitem">
Wickham, Hadley, and Lionel Henry. 2023. <em><span class="nocase">purrr</span>: Functional Programming Tools</em>. <a href="https://CRAN.R-project.org/package=purrr">https://CRAN.R-project.org/package=purrr</a>.
</div>
<div id="ref-readr" class="csl-entry" role="listitem">
Wickham, Hadley, Jim Hester, and Jennifer Bryan. 2024. <em><span class="nocase">readr</span>: Read Rectangular Text Data</em>. <a href="https://CRAN.R-project.org/package=readr">https://CRAN.R-project.org/package=readr</a>.
</div>
<div id="ref-scales" class="csl-entry" role="listitem">
Wickham, Hadley, Thomas Lin Pedersen, and Dana Seidel. 2023. <em><span class="nocase">scales</span>: Scale Functions for Visualization</em>. <a href="https://CRAN.R-project.org/package=scales">https://CRAN.R-project.org/package=scales</a>.
</div>
<div id="ref-tidyr" class="csl-entry" role="listitem">
Wickham, Hadley, Davis Vaughan, and Maximilian Girlich. 2024. <em><span class="nocase">tidyr</span>: Tidy Messy Data</em>. <a href="https://CRAN.R-project.org/package=tidyr">https://CRAN.R-project.org/package=tidyr</a>.
</div>
<div id="ref-ggtextures" class="csl-entry" role="listitem">
Wilke, Claus. 2022. <em><span class="nocase">ggtextures: Drawing Textured Rectangles and Bars with grid and ggplot2</span></em>. <a href="https://github.com/clauswilke/ggtextures">https://github.com/clauswilke/ggtextures</a>.
</div>
<div id="ref-cowplot" class="csl-entry" role="listitem">
Wilke, Claus O. 2024. <em><span class="nocase">cowplot</span>: Streamlined Plot Theme and Plot Annotations for <span class="nocase">’ggplot2’</span></em>. <a href="https://wilkelab.org/cowplot/">https://wilkelab.org/cowplot/</a>.
</div>
<div id="ref-ggtext" class="csl-entry" role="listitem">
Wilke, Claus O., and Brenton M. Wiernik. 2022. <em><span class="nocase">ggtext</span>: Improved Text Rendering Support for <span class="nocase">’ggplot2’</span></em>. <a href="https://CRAN.R-project.org/package=ggtext">https://CRAN.R-project.org/package=ggtext</a>.
</div>
<div id="ref-nobel_data" class="csl-entry" role="listitem">
www.nobelprize.org. 2024. <span>“<span>Nobel Prize API Version 2.1</span>.”</span> <a href="https://api.nobelprize.org/2.1/laureates">https://api.nobelprize.org/2.1/laureates</a>.
</div>
<div id="ref-owidR" class="csl-entry" role="listitem">
York, Piers. 2023. <em><span class="nocase">owidR</span>: Import Data from Our World in Data</em>. <a href="https://github.com/piersyork/owidR">https://github.com/piersyork/owidR</a>.
</div>
<div id="ref-ggimage" class="csl-entry" role="listitem">
Yu, Guangchuang. 2023. <em><span class="nocase">ggimage: Use Image in ’ggplot2’</span></em>. <a href="https://CRAN.R-project.org/package=ggimage">https://CRAN.R-project.org/package=ggimage</a>.
</div>
<div id="ref-gghighlight" class="csl-entry" role="listitem">
Yutani, Hiroaki. 2023. <em><span class="nocase">gghighlight</span>: Highlight Lines and Points in <span class="nocase">’ggplot2’</span></em>. <a href="https://CRAN.R-project.org/package=gghighlight">https://CRAN.R-project.org/package=gghighlight</a>.
</div>
<div id="ref-lemurs_data" class="csl-entry" role="listitem">
Zehr, Sarah M., Richard G. Roach, David Haring, Julie Taylor, Freda H. Cameron, and Anne D. Yoder. 2014. <span>“<span class="nocase">Life history profiles for 27 strepsirrhine primate taxa generated using captive data from the Duke Lemur Center</span>.”</span> <em>Scientific Data</em> 1 (1). <a href="https://doi.org/10.1038/sdata.2014.19">https://doi.org/10.1038/sdata.2014.19</a>.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/nrennie\.rbind\.io\/art-of-viz\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./bee-colonies.html" class="pagination-link" aria-label="꿀벌 군집 손실:푸아송 디스크 샘플링으로 수량 시각화">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">꿀벌 군집 손실:푸아송 디스크 샘플링으로 수량 시각화</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./text.html" class="pagination-link" aria-label="아이콘, 글꼴 및 텍스트 활용">
        <span class="nav-page-text">아이콘, 글꼴 및 텍스트 활용</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



<script src="site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.js" defer="true"></script>
</body></html>